<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Lua ç®€ä»‹ Lua æ˜¯ä¸€ä¸ªå°å·§çš„è„šæœ¬è¯­è¨€ã€‚æ˜¯å·´è¥¿é‡Œçº¦çƒ­å†…å¢å¤©ä¸»æ•™å¤§å­¦ï¼ˆPontifical Catholic University of Rio de Janeiroï¼‰é‡Œçš„ä¸€ä¸ªç ”ç©¶å°ç»„å¹¶äº 1993 å¹´å¼€å‘ã€‚å…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚Lua ç”±æ ‡å‡† C ç¼–å†™è€Œæˆï¼Œå‡ ä¹åœ¨æ‰€æœ‰æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šéƒ½å¯ä»¥ç¼–è¯‘ã€è¿è¡Œã€‚Lua å¹¶æ²¡æœ‰æä¾›å¼ºå¤§çš„åº“ï¼Œè¿™æ˜¯ç”±å®ƒçš„å®šä½å†³å®šçš„ã€‚æ‰€ä»¥ Lua ä¸é€‚åˆä½œä¸ºå¼€å‘ç‹¬ç«‹åº”ç”¨ç¨‹åºçš„è¯­è¨€ã€‚Lua æœ‰ä¸€ä¸ªåŒæ—¶è¿›è¡Œçš„ JIT é¡¹ç›®ï¼Œæä¾›åœ¨ç‰¹å®šå¹³å°ä¸Šçš„å³æ—¶ç¼–è¯‘åŠŸèƒ½ã€‚"><meta property="og:title" content="luaåŸºç¡€"><meta property="og:description" content="Lua ç®€ä»‹ Lua æ˜¯ä¸€ä¸ªå°å·§çš„è„šæœ¬è¯­è¨€ã€‚æ˜¯å·´è¥¿é‡Œçº¦çƒ­å†…å¢å¤©ä¸»æ•™å¤§å­¦ï¼ˆPontifical Catholic University of Rio de Janeiroï¼‰é‡Œçš„ä¸€ä¸ªç ”ç©¶å°ç»„å¹¶äº 1993 å¹´å¼€å‘ã€‚å…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚Lua ç”±æ ‡å‡† C ç¼–å†™è€Œæˆï¼Œå‡ ä¹åœ¨æ‰€æœ‰æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šéƒ½å¯ä»¥ç¼–è¯‘ã€è¿è¡Œã€‚Lua å¹¶æ²¡æœ‰æä¾›å¼ºå¤§çš„åº“ï¼Œè¿™æ˜¯ç”±å®ƒçš„å®šä½å†³å®šçš„ã€‚æ‰€ä»¥ Lua ä¸é€‚åˆä½œä¸ºå¼€å‘ç‹¬ç«‹åº”ç”¨ç¨‹åºçš„è¯­è¨€ã€‚Lua æœ‰ä¸€ä¸ªåŒæ—¶è¿›è¡Œçš„ JIT é¡¹ç›®ï¼Œæä¾›åœ¨ç‰¹å®šå¹³å°ä¸Šçš„å³æ—¶ç¼–è¯‘åŠŸèƒ½ã€‚"><meta property="og:type" content="website"><meta property="og:image" content="https://googoo-s.github.io/icon.png"><meta property="og:url" content="https://googoo-s.github.io/lua/lua%E5%9F%BA%E7%A1%80/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="luaåŸºç¡€"><meta name=twitter:description content="Lua ç®€ä»‹ Lua æ˜¯ä¸€ä¸ªå°å·§çš„è„šæœ¬è¯­è¨€ã€‚æ˜¯å·´è¥¿é‡Œçº¦çƒ­å†…å¢å¤©ä¸»æ•™å¤§å­¦ï¼ˆPontifical Catholic University of Rio de Janeiroï¼‰é‡Œçš„ä¸€ä¸ªç ”ç©¶å°ç»„å¹¶äº 1993 å¹´å¼€å‘ã€‚å…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚Lua ç”±æ ‡å‡† C ç¼–å†™è€Œæˆï¼Œå‡ ä¹åœ¨æ‰€æœ‰æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šéƒ½å¯ä»¥ç¼–è¯‘ã€è¿è¡Œã€‚Lua å¹¶æ²¡æœ‰æä¾›å¼ºå¤§çš„åº“ï¼Œè¿™æ˜¯ç”±å®ƒçš„å®šä½å†³å®šçš„ã€‚æ‰€ä»¥ Lua ä¸é€‚åˆä½œä¸ºå¼€å‘ç‹¬ç«‹åº”ç”¨ç¨‹åºçš„è¯­è¨€ã€‚Lua æœ‰ä¸€ä¸ªåŒæ—¶è¿›è¡Œçš„ JIT é¡¹ç›®ï¼Œæä¾›åœ¨ç‰¹å®šå¹³å°ä¸Šçš„å³æ—¶ç¼–è¯‘åŠŸèƒ½ã€‚"><meta name=twitter:image content="https://googoo-s.github.io/icon.png"><title>luaåŸºç¡€</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://googoo-s.github.io//icon.png><link href=https://googoo-s.github.io/styles.19109a40042e9f0e72e952fda4442a34.min.css rel=stylesheet><link href=https://googoo-s.github.io/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://googoo-s.github.io/js/darkmode.953af745b0f9342644d632fc167f3727.min.js></script>
<script src=https://googoo-s.github.io/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script defer src=https://googoo-s.github.io/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://googoo-s.github.io/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://googoo-s.github.io/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://googoo-s.github.io/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://googoo-s.github.io/",fetchData=Promise.all([fetch("https://googoo-s.github.io/indices/linkIndex.44e9c4d31a16cfcd2cd4979a97f5cc17.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://googoo-s.github.io/indices/contentIndex.72af593980b1b0715d0a013ec293a10e.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://googoo-s.github.io",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://googoo-s.github.io",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/googoo-s.github.io\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=googoo-s.github.io src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://googoo-s.github.io/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://googoo-s.github.io/>googoo-s ğŸ˜„ğŸ˜¸ğŸ˜</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>luaåŸºç¡€</h1><p class=meta>Last updated
Jul 31, 2023</p><ul class=tags><li><a href=https://googoo-s.github.io/tags/lua/>Lua</a></li></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#lua-ç®€ä»‹>Lua ç®€ä»‹</a></li><li><a href=#lua-ç¯å¢ƒæ­å»º>Lua ç¯å¢ƒæ­å»º</a><ol><li><a href=#helloworld>Helloworld</a></li></ol></li><li><a href=#åŸºæœ¬æ•°æ®ç±»å‹>åŸºæœ¬æ•°æ®ç±»å‹</a><ol><li><a href=#nil>Nil</a></li><li><a href=#boolean-å¸ƒå°”>Boolean (å¸ƒå°”)</a></li><li><a href=#numberæ•°å­—><strong>numberï¼ˆæ•°å­—ï¼‰</strong></a></li><li><a href=#stringå­—ç¬¦ä¸²>Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</a></li><li><a href=#table-è¡¨>Table (è¡¨)</a></li><li><a href=#function-å‡½æ•°>Function (å‡½æ•°)</a></li></ol></li><li><a href=#è¡¨è¾¾å¼>è¡¨è¾¾å¼</a><ol><li><a href=#ç®—æœ¯è¿ç®—ç¬¦>ç®—æœ¯è¿ç®—ç¬¦</a></li><li><a href=#å…³ç³»è¿ç®—ç¬¦>å…³ç³»è¿ç®—ç¬¦</a></li><li><a href=#é€»è¾‘è¿ç®—ç¬¦>é€»è¾‘è¿ç®—ç¬¦</a></li><li><a href=#å­—ç¬¦ä¸²è¿æ¥>å­—ç¬¦ä¸²è¿æ¥</a></li><li><a href=#ä¼˜å…ˆçº§>ä¼˜å…ˆçº§</a></li></ol></li><li><a href=#æ§åˆ¶ç»“æ„>æ§åˆ¶ç»“æ„</a><ol><li><a href=#if-else>If-else</a><ol><li><a href=#å•ä¸ª-if-åˆ†æ”¯å‹><strong>å•ä¸ª if åˆ†æ”¯å‹</strong></a></li><li><a href=#ä¸¤ä¸ªåˆ†æ”¯-if-else-å‹><strong>ä¸¤ä¸ªåˆ†æ”¯ if-else å‹</strong></a></li><li><a href=#å¤šä¸ªåˆ†æ”¯çš„-if-elseif-else>å¤šä¸ªåˆ†æ”¯çš„ if-elseif-else</a></li></ol></li><li><a href=#while>While</a></li><li><a href=#repeat>Repeat</a></li><li><a href=#for>For</a><ol><li><a href=#for-æ•°å­—å‹><strong>for æ•°å­—å‹</strong></a></li></ol></li><li><a href=#for-æ³›å‹>For æ³›å‹</a></li><li><a href=#break>Break</a></li><li><a href=#return>Return</a></li><li><a href=#goto>Goto</a></li></ol></li><li><a href=#å‡½æ•°>å‡½æ•°</a><ol><li><a href=#å®šä¹‰>å®šä¹‰</a></li><li><a href=#å‚æ•°>å‚æ•°</a><ol><li><a href=#æŒ‰å€¼ä¼ é€’>æŒ‰å€¼ä¼ é€’</a></li><li><a href=#å˜é•¿å‚æ•°>å˜é•¿å‚æ•°</a></li><li><a href=#å…·åå‚æ•°><strong>å…·åå‚æ•°</strong></a></li><li><a href=#æŒ‰å¼•ç”¨ä¼ é€’>æŒ‰å¼•ç”¨ä¼ é€’</a></li></ol></li><li><a href=#å‡½æ•°è¿”å›å€¼>å‡½æ•°è¿”å›å€¼</a></li></ol></li><li><a href=#å…¨åŠ¨æ€å‡½æ•°è°ƒç”¨>å…¨åŠ¨æ€å‡½æ•°è°ƒç”¨</a></li><li><a href=#æ¨¡å—>æ¨¡å—</a></li><li><a href=#string>String</a><ol><li><a href=#stringbyte-s--i--j-><strong>string.Byte (s [, i [, j ]])</strong></a></li><li><a href=#string-char-><strong>string. Char (&mldr;)</strong></a></li><li><a href=#stringupper-s><strong>string.Upper (s)</strong></a></li><li><a href=#stringlower-s><strong>string.Lower (s)</strong></a></li><li><a href=#stringlen-s><strong>string.Len (s)</strong></a></li><li><a href=#stringfind-s-p--init--plain><strong>string.Find (s, p [, init [, plain]])</strong></a></li><li><a href=#stringformat-formatstring-><strong>string.Format (formatstring, &mldr;)</strong></a></li><li><a href=#stringmatch-s-p--init><strong>string.Match (s, p [, init])</strong></a></li><li><a href=#stringgmatch-s-p><strong>string.Gmatch (s, p)</strong></a></li><li><a href=#stringrep-s-n><strong>string.Rep (s, n)</strong></a></li><li><a href=#stringsub-s-i--j><strong>string.Sub (s, i [, j])</strong></a></li><li><a href=#stringgsub-s-p-r--n><strong>string.Gsub (s, p, r [, n])</strong></a></li><li><a href=#string-reverse-s><strong>string. Reverse (s)</strong></a></li></ol></li><li><a href=#table>Table</a><ol><li><a href=#ä¸‹æ ‡ä»-1-å¼€å§‹><strong>ä¸‹æ ‡ä» 1 å¼€å§‹</strong></a></li><li><a href=#table-getn-è·å–é•¿åº¦><strong>table. Getn è·å–é•¿åº¦</strong></a></li><li><a href=#table-concat-table--sep--i--j---><strong>table. Concat (table [, sep [, i [, j ] ] ])</strong></a></li><li><a href=#table-insert-table-pos--value><strong>table. Insert (table, [pos ,] value)</strong></a></li><li><a href=#table-maxn-table><strong>table. Maxn (table)</strong></a></li><li><a href=#table-remove-table--pos><strong>table. Remove (table [, pos])</strong></a></li><li><a href=#table-sort-table--comp><strong>table. Sort (table [, comp])</strong></a></li><li><a href=#å…¶ä»–>å…¶ä»–</a></li></ol></li><li><a href=#æ—¥æœŸæ—¶é—´>æ—¥æœŸæ—¶é—´</a><ol><li><a href=#os-time-table><strong>os. Time ([table])</strong></a></li><li><a href=#os-difftime-t-2-t-1><strong>os. Difftime (t 2, t 1)</strong></a></li><li><a href=#os-date-format--time><strong>os. Date ([format [, time]])</strong></a></li></ol></li><li><a href=#æ•°å­¦åº“>æ•°å­¦åº“</a></li><li><a href=#æ–‡ä»¶>æ–‡ä»¶</a><ol><li><a href=#éšå¼æ–‡ä»¶æè¿°><strong>éšå¼æ–‡ä»¶æè¿°</strong></a></li><li><a href=#æ˜¾å¼æ–‡ä»¶æè¿°><strong>æ˜¾å¼æ–‡ä»¶æè¿°</strong></a></li><li><a href=#æ–‡ä»¶æ“ä½œå‡½æ•°><strong>æ–‡ä»¶æ“ä½œå‡½æ•°</strong></a><ol><li></li></ol></li></ol></li></ol></nav></details></aside><a href=#lua-ç®€ä»‹><h1 id=lua-ç®€ä»‹><span class=hanchor arialabel=Anchor># </span>Lua ç®€ä»‹</h1></a><p>Lua æ˜¯ä¸€ä¸ªå°å·§çš„è„šæœ¬è¯­è¨€ã€‚æ˜¯å·´è¥¿é‡Œçº¦çƒ­å†…å¢å¤©ä¸»æ•™å¤§å­¦ï¼ˆPontifical Catholic University of Rio de Janeiroï¼‰é‡Œçš„ä¸€ä¸ªç ”ç©¶å°ç»„å¹¶äº 1993 å¹´å¼€å‘ã€‚<strong>å…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½</strong>ã€‚Lua ç”±æ ‡å‡† C ç¼–å†™è€Œæˆï¼Œå‡ ä¹åœ¨æ‰€æœ‰æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šéƒ½å¯ä»¥ç¼–è¯‘ã€è¿è¡Œã€‚Lua å¹¶æ²¡æœ‰æä¾›å¼ºå¤§çš„åº“ï¼Œè¿™æ˜¯ç”±å®ƒçš„å®šä½å†³å®šçš„ã€‚æ‰€ä»¥ Lua ä¸é€‚åˆä½œä¸ºå¼€å‘ç‹¬ç«‹åº”ç”¨ç¨‹åºçš„è¯­è¨€ã€‚<strong>Lua æœ‰ä¸€ä¸ªåŒæ—¶è¿›è¡Œçš„ JIT é¡¹ç›®ï¼Œæä¾›åœ¨ç‰¹å®šå¹³å°ä¸Šçš„å³æ—¶ç¼–è¯‘åŠŸèƒ½</strong>ã€‚</p><ul><li><p><strong>Lua è„šæœ¬å¯ä»¥å¾ˆå®¹æ˜“çš„è¢« C/C++ ä»£ç è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åè¿‡æ¥è°ƒç”¨ C/C++ çš„å‡½æ•°ï¼Œè¿™ä½¿å¾— Lua åœ¨åº”ç”¨ç¨‹åºä¸­å¯ä»¥è¢«å¹¿æ³›åº”ç”¨</strong>ã€‚</p></li><li><p><strong>ä¸ä»…ä»…ä½œä¸ºæ‰©å±•è„šæœ¬ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ™®é€šçš„é…ç½®æ–‡ä»¶ï¼Œä»£æ›¿ XMLã€ini ç­‰æ–‡ä»¶æ ¼å¼ï¼Œå¹¶ä¸”æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤</strong>ã€‚</p></li><li><p>æ ‡å‡† Lua 5.1 è§£é‡Šå™¨ç”±æ ‡å‡† C ç¼–å†™è€Œæˆï¼Œä»£ç ç®€æ´ä¼˜ç¾ï¼Œå‡ ä¹åœ¨æ‰€æœ‰æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šéƒ½å¯ä»¥ç¼–è¯‘å’Œè¿è¡Œï¼›</p></li><li><p>ä¸€ä¸ªå®Œæ•´çš„æ ‡å‡† Lua 5.1 è§£é‡Šå™¨ä¸è¶³ 200 KBã€‚è€Œæœ¬ä¹¦æ¨èä½¿ç”¨çš„ LuaJIT 2 çš„ä»£ç å¤§å°ä¹Ÿåªæœ‰ä¸è¶³ 500 KB</p></li><li><p>åŒæ—¶ä¹Ÿæ”¯æŒå¤§éƒ¨åˆ†å¸¸è§çš„ä½“ç³»ç»“æ„ã€‚åœ¨ç›®å‰æ‰€æœ‰è„šæœ¬è¯­è¨€å¼•æ“ä¸­ï¼ŒLuaJIT 2 å®ç°çš„é€Ÿåº¦åº”è¯¥ç®—æ˜¯æœ€å¿«çš„ä¹‹ä¸€ã€‚è¿™ä¸€åˆ‡éƒ½å†³å®šäº† Lua æ˜¯ä½œä¸ºåµŒå…¥å¼è„šæœ¬çš„æœ€ä½³é€‰æ‹©ã€‚</p></li></ul><p>Lua è¯­è¨€çš„å„ä¸ªç‰ˆæœ¬æ˜¯ä¸ç›¸å…¼å®¹çš„ã€‚å› æ­¤æœ¬ä¹¦åªä»‹ç» Lua 5.1 è¯­è¨€ï¼Œè¿™æ˜¯ä¸ºæ ‡å‡† Lua 5.1 è§£é‡Šå™¨å’Œ LuaJIT 2 æ‰€å…±åŒæ”¯æŒçš„ã€‚LuaJIT æ”¯æŒçš„å¯¹ Lua 5.1 å‘åå…¼å®¹çš„ Lua 5.2 å’Œ Lua 5.3 çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåœ¨æ–¹ä¾¿çš„æ—¶å€™äºˆä»¥ä»‹ç»ã€‚</p><a href=#lua-ç¯å¢ƒæ­å»º><h1 id=lua-ç¯å¢ƒæ­å»º><span class=hanchor arialabel=Anchor># </span>Lua ç¯å¢ƒæ­å»º</h1></a><p><a href=http://openresty.org/ rel=noopener>http://openresty.org</a></p><a href=#helloworld><h2 id=helloworld><span class=hanchor arialabel=Anchor># </span>Helloworld</h2></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=err>#</span> <span class=nx>cat</span> <span class=nx>hello</span><span class=p>.</span><span class=nx>lua</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s>&#34;hello world&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>luajit</span> <span class=nx>hello</span><span class=p>.</span><span class=nx>lua</span>
</span></span><span class=line><span class=cl><span class=nx>hello</span> <span class=nx>world</span>
</span></span></code></pre></td></tr></table></div></div><a href=#åŸºæœ¬æ•°æ®ç±»å‹><h1 id=åŸºæœ¬æ•°æ®ç±»å‹><span class=hanchor arialabel=Anchor># </span>åŸºæœ¬æ•°æ®ç±»å‹</h1></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=kd>type</span><span class=p>(</span><span class=s>&#34;helloworld&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=kd>type</span><span class=p>(</span><span class=err>&#39;</span><span class=nx>helloworld</span><span class=err>&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=kd>type</span><span class=p>(</span><span class=err>&#39;</span><span class=kc>true</span><span class=err>&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=kd>type</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=kd>type</span><span class=p>(</span><span class=mf>2.1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=kd>type</span><span class=p>(</span><span class=kc>nil</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nx>function</span> <span class=nf>hello</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;hello&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=kd>type</span><span class=p>(</span><span class=nx>hello</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><p>è¾“å‡º</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=nx>number</span>
</span></span><span class=line><span class=cl><span class=nx>number</span>
</span></span><span class=line><span class=cl><span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=nx>function</span>
</span></span></code></pre></td></tr></table></div></div><a href=#nil><h2 id=nil><span class=hanchor arialabel=Anchor># </span>Nil</h2></a><p>Nil æ˜¯ä¸€ç§ç±»å‹ï¼ŒLua å°† nil ç”¨äºè¡¨ç¤ºâ€œæ— æ•ˆå€¼â€ã€‚</p><ul><li><p>ä¸€ä¸ªå˜é‡åœ¨ç¬¬ä¸€æ¬¡èµ‹å€¼å‰çš„é»˜è®¤å€¼æ˜¯ nilï¼Œ</p></li><li><p>å°† nil èµ‹äºˆç»™ä¸€ä¸ªå…¨å±€å˜é‡å°±ç­‰åŒäºåˆ é™¤å®ƒã€‚</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>local</span> <span class=nx>num</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>num</span><span class=p>)</span>        <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=kc>nil</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>num</span> <span class=p>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>num</span><span class=p>)</span>        <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=mi>100</span>
</span></span></code></pre></td></tr></table></div></div><a href=#boolean-å¸ƒå°”><h2 id=boolean-å¸ƒå°”><span class=hanchor arialabel=Anchor># </span>Boolean (å¸ƒå°”)</h2></a><p>å¸ƒå°”ç±»å‹ï¼Œå¯é€‰å€¼ true/falseï¼›</p><ul><li><p>Lua ä¸­ nil å’Œ false ä¸ºâ€œå‡â€</p></li><li><p>å…¶å®ƒæ‰€æœ‰å€¼å‡ä¸ºâ€œçœŸâ€ã€‚æ¯”å¦‚ 0 å’Œç©ºå­—ç¬¦ä¸²å°±æ˜¯â€œçœŸâ€ï¼›</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>local</span> <span class=nx>a</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>b</span> <span class=p>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>c</span> <span class=p>=</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>a</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;a&#34;</span><span class=p>)</span>        <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=nx>a</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;not a&#34;</span><span class=p>)</span>    <span class=o>--</span><span class=nx>è¿™ä¸ªæ²¡æœ‰æ‰§è¡Œ</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>b</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;b&#34;</span><span class=p>)</span>        <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=nx>b</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;not b&#34;</span><span class=p>)</span>    <span class=o>--</span><span class=nx>è¿™ä¸ªæ²¡æœ‰æ‰§è¡Œ</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>c</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;c&#34;</span><span class=p>)</span>        <span class=o>--</span><span class=nx>è¿™ä¸ªæ²¡æœ‰æ‰§è¡Œ</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;not c&#34;</span><span class=p>)</span>    <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=nx>not</span> <span class=nx>c</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span></code></pre></td></tr></table></div></div><a href=#numberæ•°å­—><h2 id=numberæ•°å­—><span class=hanchor arialabel=Anchor># </span><strong>numberï¼ˆæ•°å­—ï¼‰</strong></h2></a><p>Number ç±»å‹ç”¨äºè¡¨ç¤ºå®æ•°ï¼Œå’Œ C/C++ é‡Œé¢çš„ double ç±»å‹å¾ˆç±»ä¼¼ã€‚å¯ä»¥ä½¿ç”¨æ•°å­¦å‡½æ•° math. Floorï¼ˆå‘ä¸‹å–æ•´ï¼‰å’Œ math. Ceilï¼ˆå‘ä¸Šå–æ•´ï¼‰è¿›è¡Œå–æ•´æ“ä½œã€‚</p><p>ä¸€èˆ¬åœ°ï¼ŒLua çš„ number ç±»å‹å°±æ˜¯ç”¨åŒç²¾åº¦æµ®ç‚¹æ•°æ¥å®ç°çš„ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒLuaJIT æ”¯æŒæ‰€è°“çš„â€œdual-numberâ€ï¼ˆåŒæ•°ï¼‰æ¨¡å¼ï¼Œ</p><ul><li>å³ <strong>LuaJIT ä¼šæ ¹æ®ä¸Šä¸‹æ–‡ç”¨æ•´å‹æ¥å­˜å‚¨æ•´æ•°ï¼Œè€Œç”¨åŒç²¾åº¦æµ®ç‚¹æ•°æ¥å­˜æ”¾æµ®ç‚¹æ•°ã€‚</strong></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>local</span> <span class=nx>order</span> <span class=p>=</span> <span class=mf>3.99</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>score</span> <span class=p>=</span> <span class=mf>98.01</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>math</span><span class=p>.</span><span class=nf>floor</span><span class=p>(</span><span class=nx>order</span><span class=p>))</span>   <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>math</span><span class=p>.</span><span class=nf>ceil</span><span class=p>(</span><span class=nx>score</span><span class=p>))</span>    <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=mi>99</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=mi>9223372036854775807</span><span class=nx>LL</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span>  <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=mi>9223372036854775806</span><span class=nx>LL</span>
</span></span></code></pre></td></tr></table></div></div><a href=#stringå­—ç¬¦ä¸²><h2 id=stringå­—ç¬¦ä¸²><span class=hanchor arialabel=Anchor># </span>Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h2></a><p>Lua ä¸­æœ‰ä¸‰ç§æ–¹å¼è¡¨ç¤ºå­—ç¬¦ä¸²:</p><ol><li><p>ä½¿ç”¨ä¸€å¯¹åŒ¹é…çš„å•å¼•å·ã€‚ä¾‹ï¼š&lsquo;hello&rsquo;ã€‚</p></li><li><p>ä½¿ç”¨ä¸€å¯¹åŒ¹é…çš„åŒå¼•å·ã€‚ä¾‹ï¼š&ldquo;abclua&rdquo;ã€‚</p></li><li><p>å­—ç¬¦ä¸²è¿˜å¯ä»¥ç”¨ä¸€ç§é•¿æ‹¬å·ï¼ˆå³ [<input disabled type=checkbox> ]ï¼‰æ‹¬èµ·æ¥çš„æ–¹å¼å®šä¹‰</p><ol><li><p>æˆ‘ä»¬æŠŠä¸¤ä¸ªæ­£çš„æ–¹æ‹¬å·ï¼ˆå³[[ï¼‰é—´æ’å…¥ n ä¸ªç­‰å·å®šä¹‰ä¸ºç¬¬ n çº§æ­£é•¿æ‹¬å·ã€‚</p></li><li><p>0 çº§æ­£çš„é•¿æ‹¬å·å†™ä½œ [[ ï¼Œä¸€çº§æ­£çš„é•¿æ‹¬å·å†™ä½œ [=[</p></li><li><p>åçš„é•¿æ‹¬å·ä¹Ÿä½œç±»ä¼¼å®šä¹‰ï¼›ä¸¾ä¸ªä¾‹å­ï¼Œ4 çº§åçš„é•¿æ‹¬å·å†™ä½œ ]====]</p></li><li><p><strong>ä¸€ä¸ªé•¿å­—ç¬¦ä¸²å¯ä»¥ç”±ä»»ä½•ä¸€çº§çš„æ­£çš„é•¿æ‹¬å·å¼€å§‹ï¼Œè€Œç”±ç¬¬ä¸€ä¸ªç¢°åˆ°çš„åŒçº§åçš„é•¿æ‹¬å·ç»“æŸ</strong>ã€‚æ•´ä¸ªè¯æ³•åˆ†æè¿‡ç¨‹å°†<strong>ä¸å—åˆ†è¡Œé™åˆ¶ï¼Œä¸å¤„ç†ä»»ä½•è½¬ä¹‰ç¬¦ï¼Œå¹¶ä¸”å¿½ç•¥æ‰ä»»ä½•ä¸åŒçº§åˆ«çš„é•¿æ‹¬å·</strong></p></li></ol></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>local str1 = &#39;hello world&#39;
</span></span><span class=line><span class=cl>local str2 = &#34;hello lua&#34;
</span></span><span class=line><span class=cl>local str3 = <a class="internal-link broken">&</a>
</span></span><span class=line><span class=cl>local str4 = [=[string have a [[]].]=]
</span></span><span class=line><span class=cl>local str5 = [=[asdfasd]=]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>print(str1)    --&gt;output:hello world
</span></span><span class=line><span class=cl>print(str2)    --&gt;output:hello lua
</span></span><span class=line><span class=cl>print(str3)    --&gt;output:&#34;add\name&#34;,&#39;hello&#39;
</span></span><span class=line><span class=cl>print(str4)    --&gt;output:string have a [[]].
</span></span><span class=line><span class=cl>print(str5)    --&gt;output:asdfasd
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ Lua å®ç°ä¸­ï¼ŒLua å­—ç¬¦ä¸²ä¸€èˆ¬éƒ½ä¼šç»å†ä¸€ä¸ªâ€œå†…åŒ–â€ï¼ˆinternï¼‰çš„è¿‡ç¨‹ï¼Œ<strong>å³ä¸¤ä¸ªå®Œå…¨ä¸€æ ·çš„ Lua å­—ç¬¦ä¸²åœ¨ Lua è™šæ‹Ÿæœºä¸­åªä¼šå­˜å‚¨ä¸€ä»½</strong>ã€‚æ¯ä¸€ä¸ª Lua å­—ç¬¦ä¸²åœ¨åˆ›å»ºæ—¶éƒ½ä¼š<strong>æ’å…¥åˆ° Lua è™šæ‹Ÿæœºå†…éƒ¨çš„ä¸€ä¸ªå…¨å±€çš„å“ˆå¸Œè¡¨</strong>ä¸­</p><ol><li><p>åˆ›å»ºç›¸åŒçš„ Lua å­—ç¬¦ä¸²å¹¶ä¸ä¼šå¼•å…¥æ–°çš„åŠ¨æ€å†…å­˜åˆ†é…æ“ä½œï¼Œæ‰€ä»¥ç›¸å¯¹ä¾¿å®œï¼ˆä½†ä»æœ‰å…¨å±€å“ˆå¸Œè¡¨æŸ¥è¯¢çš„å¼€é”€ï¼‰ï¼Œ</p></li><li><p>å†…å®¹ç›¸åŒçš„ Lua å­—ç¬¦ä¸²ä¸ä¼šå ç”¨å¤šä»½å­˜å‚¨ç©ºé—´ï¼Œ</p></li><li><p>å·²ç»åˆ›å»ºå¥½çš„ Lua å­—ç¬¦ä¸²ä¹‹é—´è¿›è¡Œç›¸ç­‰æ€§æ¯”è¾ƒæ—¶æ˜¯ <code>O(1)</code> æ—¶é—´åº¦çš„å¼€é”€ï¼Œè€Œä¸æ˜¯é€šå¸¸è§åˆ°çš„ <code>O(n)</code>.</p></li></ol><a href=#table-è¡¨><h2 id=table-è¡¨><span class=hanchor arialabel=Anchor># </span>Table (è¡¨)</h2></a><p>Table ç±»å‹å®ç°äº†ä¸€ç§æŠ½è±¡çš„â€œå…³è”æ•°ç»„â€ã€‚â€œå…³è”æ•°ç»„â€æ˜¯ä¸€ç§å…·æœ‰ç‰¹æ®Šç´¢å¼•æ–¹å¼çš„æ•°ç»„ï¼Œ</p><ul><li>ç´¢å¼•é€šå¸¸æ˜¯<strong>å­—ç¬¦ä¸²ï¼ˆstringï¼‰æˆ–è€… number ç±»å‹ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯é™¤</strong> <strong><code>nil</code></strong> <strong>ä»¥å¤–çš„ä»»æ„ç±»å‹çš„å€¼</strong></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>corp</span> <span class=p>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>web</span> <span class=p>=</span> <span class=s>&#34;www.google.com&#34;</span><span class=p>,</span>   <span class=o>--</span><span class=nx>ç´¢å¼•ä¸ºå­—ç¬¦ä¸²</span><span class=err>ï¼Œ</span><span class=nx>key</span> <span class=p>=</span> <span class=s>&#34;web&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=o>--</span>            <span class=nx>value</span> <span class=p>=</span> <span class=s>&#34;www.google.com&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>telephone</span> <span class=p>=</span> <span class=s>&#34;12345678&#34;</span><span class=p>,</span>   <span class=o>--</span><span class=nx>ç´¢å¼•ä¸ºå­—ç¬¦ä¸²</span>
</span></span><span class=line><span class=cl>    <span class=nx>staff</span> <span class=p>=</span> <span class=p>{</span><span class=s>&#34;Jack&#34;</span><span class=p>,</span> <span class=s>&#34;Scott&#34;</span><span class=p>,</span> <span class=s>&#34;Gary&#34;</span><span class=p>},</span> <span class=o>--</span><span class=nx>ç´¢å¼•ä¸ºå­—ç¬¦ä¸²</span><span class=err>ï¼Œ</span><span class=nx>å€¼ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨</span>
</span></span><span class=line><span class=cl>    <span class=mi>100876</span><span class=p>,</span>              <span class=o>--</span><span class=nx>ç›¸å½“äº</span> <span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=p>=</span> <span class=mi>100876</span><span class=err>ï¼Œ</span><span class=nx>æ­¤æ—¶ç´¢å¼•ä¸ºæ•°å­—</span>
</span></span><span class=line><span class=cl>    <span class=o>--</span>      <span class=nx>key</span> <span class=p>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>value</span> <span class=p>=</span> <span class=mi>100876</span>
</span></span><span class=line><span class=cl>    <span class=mi>100191</span><span class=p>,</span>              <span class=o>--</span><span class=nx>ç›¸å½“äº</span> <span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=p>=</span> <span class=mi>100191</span><span class=err>ï¼Œ</span><span class=nx>æ­¤æ—¶ç´¢å¼•ä¸ºæ•°å­—</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=p>=</span> <span class=mi>360</span><span class=p>,</span>          <span class=o>--</span><span class=nx>ç›´æ¥æŠŠæ•°å­—ç´¢å¼•ç»™å‡º</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=s>&#34;city&#34;</span><span class=p>]</span> <span class=p>=</span> <span class=s>&#34;Beijing&#34;</span> <span class=o>--</span><span class=nx>ç´¢å¼•ä¸ºå­—ç¬¦ä¸²</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>corp</span><span class=p>.</span><span class=nx>web</span><span class=p>)</span>               <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=nx>www</span><span class=p>.</span><span class=nx>google</span><span class=p>.</span><span class=nx>com</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>corp</span><span class=p>[</span><span class=s>&#34;web&#34;</span><span class=p>])</span>               <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=nx>www</span><span class=p>.</span><span class=nx>google</span><span class=p>.</span><span class=nx>com</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>corp</span><span class=p>[</span><span class=s>&#34;telephone&#34;</span><span class=p>])</span>      <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=mi>12345678</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>corp</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>                <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=mi>100191</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>corp</span><span class=p>[</span><span class=s>&#34;city&#34;</span><span class=p>])</span>           <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=s>&#34;Beijing&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>corp</span><span class=p>.</span><span class=nx>staff</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>          <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=nx>Jack</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>corp</span><span class=p>[</span><span class=s>&#34;staff&#34;</span><span class=p>][</span><span class=mi>1</span><span class=p>])</span>          <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=nx>Jack</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>corp</span><span class=p>[</span><span class=mi>10</span><span class=p>])</span>               <span class=o>--</span><span class=p>&gt;</span><span class=nx>output</span><span class=p>:</span><span class=mi>360</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨å†…éƒ¨å®ç°ä¸Šï¼Œtable é€šå¸¸å®ç°ä¸ºä¸€ä¸ªå“ˆå¸Œè¡¨ã€ä¸€ä¸ªæ•°ç»„ã€æˆ–è€…ä¸¤è€…çš„æ··åˆã€‚å…·ä½“çš„å®ç°ä¸ºä½•ç§å½¢å¼ï¼ŒåŠ¨æ€ä¾èµ–äºå…·ä½“çš„ table çš„é”®åˆ†å¸ƒç‰¹ç‚¹ã€‚</p><a href=#function-å‡½æ•°><h2 id=function-å‡½æ•°><span class=hanchor arialabel=Anchor># </span>Function (å‡½æ•°)</h2></a><p>åœ¨ Lua ä¸­ï¼Œ<strong>å‡½æ•°</strong> ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå‡½æ•°å¯ä»¥å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œå¯ä»¥é€šè¿‡å‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œè¿˜å¯ä»¥ä½œä¸ºå…¶ä»–å‡½æ•°çš„è¿”å›å€¼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>local</span> <span class=nx>function</span> <span class=nf>foo</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;in the function&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>--</span><span class=nf>dosomething</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>local</span> <span class=nx>x</span> <span class=p>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=nx>local</span> <span class=nx>y</span> <span class=p>=</span> <span class=mi>20</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>a</span> <span class=p>=</span> <span class=nx>foo</span>    <span class=o>--</span><span class=nx>æŠŠå‡½æ•°èµ‹ç»™å˜é‡</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nf>a</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span><span class=nx>output</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=o>--</span><span class=nx>in</span> <span class=nx>the</span> <span class=nx>function</span>
</span></span><span class=line><span class=cl><span class=o>--</span><span class=mi>30</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>function</span> <span class=nf>foo</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span><span class=line><span class=cl><span class=o>--</span><span class=nx>ç­‰ä»·äº</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>foo</span> <span class=p>=</span> <span class=nf>function</span> <span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>function</span> <span class=nf>foo</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=nx>ç­‰ä»·äº</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>foo</span> <span class=p>=</span> <span class=nf>function</span> <span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span></code></pre></td></tr></table></div></div><a href=#è¡¨è¾¾å¼><h1 id=è¡¨è¾¾å¼><span class=hanchor arialabel=Anchor># </span>è¡¨è¾¾å¼</h1></a><a href=#ç®—æœ¯è¿ç®—ç¬¦><h2 id=ç®—æœ¯è¿ç®—ç¬¦><span class=hanchor arialabel=Anchor># </span>ç®—æœ¯è¿ç®—ç¬¦</h2></a><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>ç®—æœ¯è¿ç®—ç¬¦</td><td>è¯´æ˜</td></tr><tr><td>+</td><td>åŠ æ³•</td></tr><tr><td>-</td><td>å‡æ³•</td></tr><tr><td>*</td><td>ä¹˜æ³•</td></tr><tr><td>/</td><td>é™¤æ³•</td></tr><tr><td>^</td><td>æŒ‡æ•°</td></tr><tr><td>%</td><td>å–æ¨¡</td></tr></tbody></table><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=mi>1</span> <span class=o>+</span> <span class=mi>2</span><span class=p>)</span>       <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=mi>5</span> <span class=o>/</span> <span class=mi>10</span><span class=p>)</span>      <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=mf>0.5</span><span class=err>ã€‚</span> <span class=nx>è¿™æ˜¯Luaä¸åŒäºcè¯­è¨€çš„</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=mf>5.0</span> <span class=o>/</span> <span class=mi>10</span><span class=p>)</span>    <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=mf>0.5</span><span class=err>ã€‚</span> <span class=nx>æµ®ç‚¹æ•°ç›¸é™¤çš„ç»“æœæ˜¯æµ®ç‚¹æ•°</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=nb>print</span><span class=p>(</span><span class=mi>10</span> <span class=o>/</span> <span class=mi>0</span><span class=p>)</span>   <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ³¨æ„é™¤æ•°ä¸èƒ½ä¸º0</span><span class=err>ï¼Œ</span><span class=nx>è®¡ç®—çš„ç»“æœä¼šå‡ºé”™</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=mi>2</span> <span class=p>^</span> <span class=mi>10</span><span class=p>)</span>      <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=mi>1024</span><span class=err>ã€‚</span> <span class=nx>æ±‚2çš„10æ¬¡æ–¹</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>num</span> <span class=p>=</span> <span class=mi>1357</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>num</span> <span class=o>%</span> <span class=mi>2</span><span class=p>)</span>       <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>((</span><span class=nx>num</span> <span class=o>%</span> <span class=mi>2</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=kc>true</span><span class=err>ã€‚</span> <span class=nx>åˆ¤æ–­numæ˜¯å¦ä¸ºå¥‡æ•°</span>
</span></span></code></pre></td></tr></table></div></div><a href=#å…³ç³»è¿ç®—ç¬¦><h2 id=å…³ç³»è¿ç®—ç¬¦><span class=hanchor arialabel=Anchor># </span>å…³ç³»è¿ç®—ç¬¦</h2></a><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>å…³ç³»è¿ç®—ç¬¦</td><td>è¯´æ˜</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>></td><td>å¤§äº</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td></tr><tr><td>>=</td><td>å¤§äºç­‰äº</td></tr><tr><td>==</td><td>ç­‰äº</td></tr><tr><td>~=</td><td>ä¸ç­‰äº</td></tr></tbody></table><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=mi>1</span> <span class=p>&lt;</span> <span class=mi>2</span><span class=p>)</span>    <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=mi>1</span> <span class=o>==</span> <span class=mi>2</span><span class=p>)</span>   <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=mi>1</span> <span class=err>~</span><span class=p>=</span> <span class=mi>2</span><span class=p>)</span>   <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=p>=</span> <span class=kc>true</span><span class=p>,</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>a</span> <span class=o>==</span> <span class=nx>b</span><span class=p>)</span>  <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=kc>false</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>åœ¨ä½¿ç”¨â€œ==â€åšç­‰äºåˆ¤æ–­æ—¶ï¼Œè¦æ³¨æ„å¯¹äº table, userdate å’Œå‡½æ•°ï¼Œ Lua æ˜¯ä½œå¼•ç”¨æ¯”è¾ƒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å½“ä¸¤ä¸ªå˜é‡å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæ‰è®¤ä¸ºå®ƒä»¬ç›¸ç­‰</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>local</span> <span class=nx>a</span> <span class=p>=</span> <span class=p>{</span> <span class=nx>x</span> <span class=p>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>y</span> <span class=p>=</span> <span class=mi>0</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>b</span> <span class=p>=</span> <span class=p>{</span> <span class=nx>x</span> <span class=p>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>y</span> <span class=p>=</span> <span class=mi>0</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>a</span> <span class=o>==</span> <span class=nx>b</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;a==b&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;a~=b&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span><span class=line><span class=cl><span class=o>---</span><span class=nx>output</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=nx>a</span><span class=err>~</span><span class=p>=</span><span class=nx>b</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><p>Lua å­—ç¬¦ä¸²æ€»æ˜¯ä¼šè¢«â€œå†…åŒ–â€ï¼Œå³ç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²åªä¼šè¢«ä¿å­˜ä¸€ä»½ï¼Œå› æ­¤ Lua å­—ç¬¦ä¸²ä¹‹é—´çš„ç›¸ç­‰æ€§æ¯”è¾ƒå¯ä»¥ç®€åŒ–ä¸ºå…¶å†…éƒ¨å­˜å‚¨åœ°å€çš„æ¯”è¾ƒã€‚</p></li><li><p>è¿™æ„å‘³ç€ Lua å­—ç¬¦ä¸²çš„ç›¸ç­‰æ€§æ¯”è¾ƒæ€»æ˜¯ä¸º O (1)</p></li></ul><a href=#é€»è¾‘è¿ç®—ç¬¦><h2 id=é€»è¾‘è¿ç®—ç¬¦><span class=hanchor arialabel=Anchor># </span>é€»è¾‘è¿ç®—ç¬¦</h2></a><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>é€»è¾‘è¿ç®—ç¬¦</td><td>è¯´æ˜</td></tr><tr><td>and</td><td>é€»è¾‘ä¸</td></tr><tr><td>or</td><td>é€»è¾‘æˆ–</td></tr><tr><td>not</td><td>é€»è¾‘é</td></tr></tbody></table><p>åœ¨ c è¯­è¨€ä¸­ï¼Œand å’Œ or åªå¾—åˆ°ä¸¤ä¸ªå€¼ 1 å’Œ 0ï¼Œå…¶ä¸­ 1 è¡¨ç¤ºçœŸï¼Œ0 è¡¨ç¤ºå‡ã€‚è€Œ Lua ä¸­ and çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li><p><code>a and b</code> å¦‚æœ a ä¸º nilï¼Œåˆ™è¿”å› aï¼Œå¦åˆ™è¿”å› b;</p></li><li><p><code>a or b</code> å¦‚æœ a ä¸º nilï¼Œåˆ™è¿”å› bï¼Œå¦åˆ™è¿”å› aã€‚</p></li><li><p><strong>æ‰€æœ‰é€»è¾‘æ“ä½œç¬¦å°† false å’Œ nil è§†ä½œå‡ï¼Œå…¶ä»–ä»»ä½•å€¼è§†ä½œçœŸï¼Œå¯¹äº and å’Œ orï¼Œâ€œçŸ­è·¯æ±‚å€¼â€ï¼Œå¯¹äº notï¼Œæ°¸è¿œåªè¿”å› true æˆ–è€… falseã€‚</strong></p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>local</span> <span class=nx>c</span> <span class=p>=</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>d</span> <span class=p>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>e</span> <span class=p>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>c</span> <span class=nx>and</span> <span class=nx>d</span><span class=p>)</span>  <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>c</span> <span class=nx>and</span> <span class=nx>e</span><span class=p>)</span>  <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>d</span> <span class=nx>and</span> <span class=nx>e</span><span class=p>)</span>  <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>c</span> <span class=nx>or</span> <span class=nx>d</span><span class=p>)</span>   <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>c</span> <span class=nx>or</span> <span class=nx>e</span><span class=p>)</span>   <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>not</span> <span class=nx>c</span><span class=p>)</span>    <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>not</span> <span class=nx>d</span><span class=p>)</span>    <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=kc>false</span>
</span></span></code></pre></td></tr></table></div></div><a href=#å­—ç¬¦ä¸²è¿æ¥><h2 id=å­—ç¬¦ä¸²è¿æ¥><span class=hanchor arialabel=Anchor># </span>å­—ç¬¦ä¸²è¿æ¥</h2></a><p>Lua ä¸­è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨æ“ä½œç¬¦â€œ..â€ï¼ˆä¸¤ä¸ªç‚¹ï¼‰</p><ul><li><p>å¦‚æœå…¶ä»»æ„ä¸€ä¸ªæ“ä½œæ•°æ˜¯æ•°å­—çš„è¯ï¼ŒLua ä¼šå°†è¿™ä¸ªæ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚</p></li><li><p>æ³¨æ„ï¼Œè¿æ¥æ“ä½œç¬¦åªä¼šåˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè€Œä¸ä¼šæ”¹å˜åŸæ“ä½œæ•°</p></li><li><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ string åº“å‡½æ•° <code>string.format</code> è¿æ¥å­—ç¬¦ä¸²</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s>&#34;Hello &#34;</span> <span class=p>..</span> <span class=s>&#34;World&#34;</span><span class=p>)</span>    <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=nx>Hello</span> <span class=nf>Worldprint</span><span class=p>(</span><span class=mi>0</span> <span class=p>..</span> <span class=mi>1</span><span class=p>)</span>                 <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=mo>01</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>str1</span> <span class=p>=</span> <span class=kt>string</span><span class=p>.</span><span class=nf>format</span><span class=p>(</span><span class=s>&#34;%s-%s&#34;</span><span class=p>,</span><span class=s>&#34;hello&#34;</span><span class=p>,</span><span class=s>&#34;world&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>str1</span><span class=p>)</span>              <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=nx>hello</span><span class=o>-</span><span class=nx>world</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>str2</span> <span class=p>=</span> <span class=kt>string</span><span class=p>.</span><span class=nf>format</span><span class=p>(</span><span class=s>&#34;%d-%s-%.2f&#34;</span><span class=p>,</span><span class=mi>123</span><span class=p>,</span><span class=s>&#34;world&#34;</span><span class=p>,</span><span class=mf>1.21</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nx>str2</span><span class=p>)</span>              <span class=o>--</span><span class=p>&gt;</span><span class=nx>æ‰“å°</span> <span class=mi>123</span><span class=o>-</span><span class=nx>world</span><span class=o>-</span><span class=mf>1.21</span>
</span></span></code></pre></td></tr></table></div></div><p>äº Lua å­—ç¬¦ä¸²æœ¬è´¨ä¸Šæ˜¯åªè¯»çš„ï¼Œ<strong>å› æ­¤å­—ç¬¦ä¸²è¿æ¥è¿ç®—ç¬¦å‡ ä¹æ€»ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ï¼ˆæ›´å¤§çš„ï¼‰å­—ç¬¦ä¸²</strong>ã€‚è¿™æ„å‘³ç€å¦‚æœæœ‰å¾ˆå¤šè¿™æ ·çš„è¿æ¥æ“ä½œï¼ˆæ¯”å¦‚åœ¨å¾ªç¯ä¸­ä½¿ç”¨ .. æ¥æ‹¼æ¥æœ€ç»ˆç»“æœï¼‰ï¼Œåˆ™æ€§èƒ½æŸè€—ä¼šéå¸¸å¤§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ table å’Œ <code>table.concat()</code> æ¥è¿›è¡Œå¾ˆå¤šå­—ç¬¦ä¸²çš„æ‹¼æ¥</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>local</span> <span class=nx>pieces</span> <span class=p>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>elem</span> <span class=nx>in</span> <span class=nf>ipairs</span><span class=p>(</span><span class=nx>my_list</span><span class=p>)</span> <span class=nx>do</span>
</span></span><span class=line><span class=cl>    <span class=nx>pieces</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>=</span> <span class=nf>my_process</span><span class=p>(</span><span class=nx>elem</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>res</span> <span class=p>=</span> <span class=nx>table</span><span class=p>.</span><span class=nf>concat</span><span class=p>(</span><span class=nx>pieces</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢çš„ä¾‹å­è¿˜å¯ä»¥ä½¿ç”¨ LuaJIT ç‹¬æœ‰çš„ <code>table.new</code> æ¥æ°å½“åœ°åˆå§‹åŒ– <code>pieces</code> è¡¨çš„ç©ºé—´ï¼Œä»¥é¿å…è¯¥è¡¨çš„åŠ¨æ€ç”Ÿé•¿ã€‚</p><a href=#ä¼˜å…ˆçº§><h2 id=ä¼˜å…ˆçº§><span class=hanchor arialabel=Anchor># </span>ä¼˜å…ˆçº§</h2></a><table><thead><tr><th>f</th><th></th></tr></thead><tbody><tr><td>^</td><td></td></tr><tr><td>not # -</td><td></td></tr><tr><td>* / %</td><td></td></tr><tr><td>+ -</td><td></td></tr><tr><td>..</td><td></td></tr><tr><td>&lt; > &lt;= >= == ~=</td><td></td></tr><tr><td>and</td><td></td></tr><tr><td>or</td><td></td></tr></tbody></table><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>local</span> <span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=p>=</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>x</span><span class=p>,</span> <span class=nx>y</span> <span class=p>=</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>i</span> <span class=p>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=nx>local</span> <span class=nx>res</span> <span class=p>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=nx>res</span> <span class=p>=</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>b</span><span class=o>/</span><span class=mi>2</span> <span class=o>+</span> <span class=mi>1</span>  <span class=o>--</span><span class=p>&gt;</span><span class=nx>ç­‰ä»·äºres</span> <span class=p>=</span>  <span class=p>(</span><span class=nx>a</span> <span class=o>+</span> <span class=nx>i</span><span class=p>)</span> <span class=p>&lt;</span> <span class=p>((</span><span class=nx>b</span><span class=o>/</span><span class=mi>2</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>res</span> <span class=p>=</span> <span class=mi>5</span> <span class=o>+</span> <span class=nx>x</span><span class=p>^</span><span class=mi>2</span><span class=o>*</span><span class=mi>8</span>        <span class=o>--</span><span class=p>&gt;</span><span class=nx>ç­‰ä»·äºres</span> <span class=p>=</span>  <span class=mi>5</span> <span class=o>+</span> <span class=p>((</span><span class=nx>x</span><span class=p>^</span><span class=mi>2</span><span class=p>)</span> <span class=o>*</span> <span class=mi>8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>res</span> <span class=p>=</span> <span class=nx>a</span> <span class=p>&lt;</span> <span class=nx>y</span> <span class=nx>and</span> <span class=nx>y</span> <span class=o>&lt;=</span><span class=nx>x</span>  <span class=o>--</span><span class=p>&gt;</span><span class=nx>ç­‰ä»·äºres</span> <span class=p>=</span>  <span class=p>(</span><span class=nx>a</span> <span class=p>&lt;</span> <span class=nx>y</span><span class=p>)</span> <span class=nf>and</span> <span class=p>(</span><span class=nx>y</span> <span class=o>&lt;=</span> <span class=nx>x</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><a href=#æ§åˆ¶ç»“æ„><h1 id=æ§åˆ¶ç»“æ„><span class=hanchor arialabel=Anchor># </span>æ§åˆ¶ç»“æ„</h1></a><a href=#if-else><h2 id=if-else><span class=hanchor arialabel=Anchor># </span>If-else</h2></a><a href=#å•ä¸ª-if-åˆ†æ”¯å‹><h3 id=å•ä¸ª-if-åˆ†æ”¯å‹><span class=hanchor arialabel=Anchor># </span><strong>å•ä¸ª if åˆ†æ”¯å‹</strong></h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>x</span> <span class=p>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>x</span> <span class=p>&gt;</span> <span class=mi>0</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;x is a positive number&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span></code></pre></td></tr></table></div></div><a href=#ä¸¤ä¸ªåˆ†æ”¯-if-else-å‹><h3 id=ä¸¤ä¸ªåˆ†æ”¯-if-else-å‹><span class=hanchor arialabel=Anchor># </span><strong>ä¸¤ä¸ªåˆ†æ”¯ if-else å‹</strong></h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>x</span> <span class=p>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>x</span> <span class=p>&gt;</span> <span class=mi>0</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;x is a positive number&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;x is a non-positive number&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span></code></pre></td></tr></table></div></div><a href=#å¤šä¸ªåˆ†æ”¯çš„-if-elseif-else><h3 id=å¤šä¸ªåˆ†æ”¯çš„-if-elseif-else><span class=hanchor arialabel=Anchor># </span>å¤šä¸ªåˆ†æ”¯çš„ if-elseif-else</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>score</span> <span class=p>=</span> <span class=mi>90</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>score</span> <span class=o>==</span> <span class=mi>100</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;Very good!Your score is 100&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>elseif</span> <span class=nx>score</span> <span class=o>&gt;=</span> <span class=mi>60</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;Congratulations, you have passed it,your score greater or equal to 60&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>--</span><span class=nx>æ­¤å¤„å¯ä»¥æ·»åŠ å¤šä¸ªelseif</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;Sorry, you do not pass the exam! &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸ C è¯­è¨€çš„ä¸åŒä¹‹å¤„æ˜¯ else ä¸ if æ˜¯è¿åœ¨ä¸€èµ·çš„ï¼Œè‹¥å°† else ä¸ if å†™æˆ &ldquo;else if&rdquo; åˆ™ç›¸å½“äºåœ¨ else é‡ŒåµŒå¥—å¦ä¸€ä¸ª if è¯­å¥ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>score</span> <span class=p>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>score</span> <span class=o>==</span> <span class=mi>100</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;Very good!Your score is 100&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>elseif</span> <span class=nx>score</span> <span class=o>&gt;=</span> <span class=mi>60</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s>&#34;Congratulations, you have passed it,your score greater or equal to 60&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>score</span> <span class=p>&gt;</span> <span class=mi>0</span> <span class=nx>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s>&#34;Your score is better than 0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s>&#34;My God, your score turned out to be 0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>end</span> <span class=o>--</span><span class=nx>ä¸ä¸Šä¸€ç¤ºä¾‹ä»£ç ä¸åŒçš„æ˜¯</span><span class=err>ï¼Œ</span><span class=nx>æ­¤å¤„è¦æ·»åŠ ä¸€ä¸ªend</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span></code></pre></td></tr></table></div></div><a href=#while><h2 id=while><span class=hanchor arialabel=Anchor># </span>While</h2></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Go data-lang=Go><span class=line><span class=cl><span class=nx>while</span> <span class=nx>è¡¨è¾¾å¼</span> <span class=nx>do</span>
</span></span><span class=line><span class=cl>    <span class=o>--</span><span class=nx>body</span>
</span></span><span class=line><span class=cl><span class=nx>end</span>
</span></span></code></pre></td></tr></table></div></div><a href=#repeat><h2 id=repeat><span class=hanchor arialabel=Anchor># </span>Repeat</h2></a><p>Lua ä¸­çš„ repeat æ§åˆ¶ç»“æ„ç±»ä¼¼äºå…¶ä»–è¯­è¨€ï¼ˆå¦‚ï¼šC++ è¯­è¨€ï¼‰ä¸­çš„ do-whileï¼Œä½†æ˜¯æ§åˆ¶æ–¹å¼æ˜¯åˆšå¥½ç›¸åçš„ã€‚ç®€å•ç‚¹è¯´ï¼Œ<strong>æ‰§è¡Œ repeat å¾ªç¯ä½“åï¼Œç›´åˆ° until çš„æ¡ä»¶ä¸ºçœŸæ—¶æ‰ç»“æŸ</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=c1>-- ä»¥ä¸‹ä»£ç ä¼šæ­»å¾ªç¯</span>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=kr>repeat</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>until</span> <span class=kc>false</span>
</span></span></code></pre></td></tr></table></div></div><a href=#for><h2 id=for><span class=hanchor arialabel=Anchor># </span>For</h2></a><a href=#for-æ•°å­—å‹><h3 id=for-æ•°å­—å‹><span class=hanchor arialabel=Anchor># </span><strong>for æ•°å­—å‹</strong></h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kr>for</span> <span class=n>var</span> <span class=o>=</span> <span class=n>begin</span><span class=p>,</span> <span class=n>finish</span><span class=p>,</span> <span class=n>step</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>    <span class=c1>--body</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span></code></pre></td></tr></table></div></div><ol><li><p>Var ä» begin å˜åŒ–åˆ° finishï¼Œæ¯æ¬¡å˜åŒ–éƒ½ä»¥ step ä½œä¸ºæ­¥é•¿é€’å¢ var</p></li><li><p>Beginã€finishã€step ä¸‰ä¸ªè¡¨è¾¾å¼åªä¼šåœ¨å¾ªç¯å¼€å§‹æ—¶æ‰§è¡Œä¸€æ¬¡</p></li><li><p>ç¬¬ä¸‰ä¸ªè¡¨è¾¾å¼ step æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤ä¸º 1</p></li><li><p>æ§åˆ¶å˜é‡ var çš„ä½œç”¨åŸŸä»…åœ¨ for å¾ªç¯å†…ï¼Œéœ€è¦åœ¨å¤–é¢æ§åˆ¶ï¼Œåˆ™éœ€å°†å€¼èµ‹ç»™ä¸€ä¸ªæ–°çš„å˜é‡</p></li><li><p>å¾ªç¯è¿‡ç¨‹ä¸­ä¸è¦æ”¹å˜æ§åˆ¶å˜é‡çš„å€¼ï¼Œé‚£æ ·ä¼šå¸¦æ¥ä¸å¯é¢„çŸ¥çš„å½±å“</p></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kr>for</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>5</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=c1>-- output:</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>for</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>2</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=c1>-- output:</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=mi>7</span>
</span></span><span class=line><span class=cl><span class=mi>9</span>
</span></span></code></pre></td></tr></table></div></div><a href=#for-æ³›å‹><h2 id=for-æ³›å‹><span class=hanchor arialabel=Anchor># </span>For æ³›å‹</h2></a><p>æ³›å‹ for å¾ªç¯é€šè¿‡ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆiteratorï¼‰å‡½æ•°æ¥éå†æ‰€æœ‰å€¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=c1>-- æ‰“å°æ•°ç»„açš„æ‰€æœ‰å€¼local a = {&#34;a&#34;, &#34;b&#34;, &#34;c&#34;, &#34;d&#34;}</span>
</span></span><span class=line><span class=cl><span class=kr>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>v</span> <span class=kr>in</span> <span class=n>ipairs</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=s2>&#34;index:&#34;</span><span class=p>,</span> <span class=n>i</span><span class=p>,</span> <span class=s2>&#34; value:&#34;</span><span class=p>,</span> <span class=n>v</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=c1>-- output:</span>
</span></span><span class=line><span class=cl><span class=n>index</span><span class=p>:</span>  <span class=mi>1</span>  <span class=n>value</span><span class=p>:</span> <span class=n>a</span>
</span></span><span class=line><span class=cl><span class=n>index</span><span class=p>:</span>  <span class=mi>2</span>  <span class=n>value</span><span class=p>:</span> <span class=n>b</span>
</span></span><span class=line><span class=cl><span class=n>index</span><span class=p>:</span>  <span class=mi>3</span>  <span class=n>value</span><span class=p>:</span> <span class=n>c</span>
</span></span><span class=line><span class=cl><span class=n>index</span><span class=p>:</span>  <span class=mi>4</span>  <span class=n>value</span><span class=p>:</span> <span class=n>d</span>
</span></span></code></pre></td></tr></table></div></div><p>Lua çš„åŸºç¡€åº“æä¾›äº† <strong>ipairsï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºéå†æ•°ç»„çš„è¿­ä»£å™¨å‡½æ•°</strong>ã€‚åœ¨æ¯æ¬¡å¾ªç¯ä¸­ï¼Œi ä¼šè¢«èµ‹äºˆä¸€ä¸ªç´¢å¼•å€¼ï¼ŒåŒæ—¶ v è¢«èµ‹äºˆä¸€ä¸ªå¯¹åº”äºè¯¥ç´¢å¼•çš„æ•°ç»„å…ƒç´ å€¼ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=c1>-- æ‰“å°table tä¸­æ‰€æœ‰çš„</span>
</span></span><span class=line><span class=cl><span class=n>keyfor</span> <span class=n>k</span> <span class=kr>in</span> <span class=n>pairs</span><span class=p>(</span><span class=n>t</span><span class=p>)</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>k</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span></code></pre></td></tr></table></div></div><p>é€šè¿‡ä¸åŒçš„è¿­ä»£å™¨ï¼Œå‡ ä¹å¯ä»¥éå†æ‰€æœ‰çš„ä¸œè¥¿ï¼Œè€Œä¸”å†™å‡ºçš„ä»£ç æå…·å¯è¯»æ€§ã€‚æ ‡å‡†åº“æä¾›äº†å‡ ç§è¿­ä»£å™¨ï¼ŒåŒ…æ‹¬ç”¨äºè¿­ä»£æ–‡ä»¶ä¸­æ¯è¡Œçš„ï¼ˆio. Linesï¼‰ã€è¿­ä»£ table å…ƒç´ çš„ï¼ˆpairsï¼‰ã€è¿­ä»£æ•°ç»„å…ƒç´ çš„ï¼ˆipairsï¼‰ã€è¿­ä»£å­—ç¬¦ä¸²ä¸­å•è¯çš„ï¼ˆstring. Gmatchï¼‰</p><p>æ³›å‹ for å¾ªç¯ä¸æ•°å­—å‹ for å¾ªç¯æœ‰ä¸¤ä¸ªç›¸åŒç‚¹ï¼š</p><ol><li><p>å¾ªç¯å˜é‡æ˜¯å¾ªç¯ä½“çš„å±€éƒ¨å˜é‡ï¼›</p></li><li><p>å†³ä¸åº”è¯¥å¯¹å¾ªç¯å˜é‡ä½œä»»ä½•èµ‹å€¼ã€‚</p></li></ol><p>åœ¨ LuaJIT 2.1 ä¸­ï¼Œ<strong><code>ipairs()</code></strong> <strong>å†…å»ºå‡½æ•°æ˜¯å¯ä»¥è¢« JIT ç¼–è¯‘çš„ï¼Œè€Œ</strong> <strong><code>pairs()</code></strong> <strong>åˆ™åªèƒ½è¢«è§£é‡Šæ‰§è¡Œã€‚å› æ­¤åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ï¼Œåº”å½“åˆç†å®‰æ’æ•°æ®ç»“æ„ï¼Œé¿å…å¯¹å“ˆå¸Œè¡¨è¿›è¡Œéå†</strong></p><a href=#break><h2 id=break><span class=hanchor arialabel=Anchor># </span>Break</h2></a><p>è¯­å¥ <code>break</code> ç”¨æ¥ç»ˆæ­¢ <code>while</code>ã€<code>repeat</code> å’Œ <code>for</code> ä¸‰ç§å¾ªç¯çš„æ‰§è¡Œï¼Œå¹¶è·³å‡ºå½“å‰å¾ªç¯ä½“ï¼Œç»§ç»­æ‰§è¡Œå½“å‰å¾ªç¯ä¹‹åçš„è¯­å¥</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=c1>-- è®¡ç®—æœ€å°çš„x,ä½¿ä»1åˆ°xçš„æ‰€æœ‰æ•°ç›¸åŠ å’Œå¤§äº100</span>
</span></span><span class=line><span class=cl><span class=n>sum</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=kr>while</span> <span class=kc>true</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>    <span class=n>sum</span> <span class=o>=</span> <span class=n>sum</span> <span class=o>+</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>    <span class=kr>if</span> <span class=n>sum</span> <span class=o>&gt;</span> <span class=mi>100</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>        <span class=kr>break</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=n>i</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=s2>&#34;The result is &#34;</span> <span class=o>..</span> <span class=n>i</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=c1>--&gt;output:The result is 14</span>
</span></span></code></pre></td></tr></table></div></div><a href=#return><h2 id=return><span class=hanchor arialabel=Anchor># </span>Return</h2></a><p><code>return</code> ä¸»è¦ç”¨äºä»å‡½æ•°ä¸­è¿”å›ç»“æœï¼Œæˆ–è€…ç”¨äºç®€å•çš„ç»“æŸä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>add</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span>
</span></span><span class=line><span class=cl>    <span class=c1>--print(&#34;add: I will return the result &#34; .. (x + y))</span>
</span></span><span class=line><span class=cl>    <span class=c1>--å› ä¸ºå‰é¢æœ‰ä¸ªreturnï¼Œè‹¥ä¸æ³¨é‡Šè¯¥è¯­å¥ï¼Œåˆ™ä¼šæŠ¥é”™</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>is_positive</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>if</span> <span class=n>x</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>        <span class=kr>return</span> <span class=n>x</span> <span class=o>..</span> <span class=s2>&#34; is positive&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kr>else</span>
</span></span><span class=line><span class=cl>        <span class=kr>return</span> <span class=n>x</span> <span class=o>..</span> <span class=s2>&#34; is non-positive&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>--ç”±äºreturnåªå‡ºç°åœ¨å‰é¢æ˜¾å¼çš„è¯­å¥å—ï¼Œæ‰€ä»¥æ­¤è¯­å¥ä¸æ³¨é‡Šä¹Ÿä¸ä¼šæŠ¥é”™</span>
</span></span><span class=line><span class=cl>    <span class=c1>--ï¼Œä½†æ˜¯ä¸ä¼šè¢«æ‰§è¡Œï¼Œæ­¤å¤„ä¸ä¼šäº§ç”Ÿè¾“å‡º</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=s2>&#34;function end!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>sum</span> <span class=o>=</span> <span class=n>add</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=s2>&#34;The sum is &#34;</span> <span class=o>..</span> <span class=n>sum</span><span class=p>)</span>  <span class=c1>--&gt;output:The sum is 30</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>answer</span> <span class=o>=</span> <span class=n>is_positive</span><span class=p>(</span><span class=o>-</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>answer</span><span class=p>)</span>                <span class=c1>--&gt;output:-10 is non-positive</span>
</span></span></code></pre></td></tr></table></div></div><a href=#goto><h2 id=goto><span class=hanchor arialabel=Anchor># </span>Goto</h2></a><p>æœ‰äº† <code>goto</code>ï¼Œæˆ‘ä»¬å¯ä»¥å®ç° <code>continue</code> çš„åŠŸèƒ½ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kr>for</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>    <span class=kr>if</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>        <span class=n>print</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=s2>&#34;yes continue&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>goto</span> <span class=nl>continue</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=s2>&#34; no continue&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>::</span><span class=nl>continue</span><span class=p>::</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=s><a class="internal-link broken">i&</a></span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span></code></pre></td></tr></table></div></div><p>è¾“å‡ºç»“æœ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=err>$</span> <span class=n>luajit</span> <span class=n>test.lua</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>   <span class=n>yes</span> <span class=n>continue</span>
</span></span><span class=line><span class=cl><span class=n>i</span><span class=s1>&#39;m end
</span></span></span><span class=line><span class=cl><span class=s1>2   yes continue
</span></span></span><span class=line><span class=cl><span class=s1>i&#39;</span><span class=n>m</span> <span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>    <span class=n>no</span> <span class=n>continue</span>
</span></span><span class=line><span class=cl><span class=n>i</span><span class=s1>&#39;m end
</span></span></span></code></pre></td></tr></table></div></div><a href=#å‡½æ•°><h1 id=å‡½æ•°><span class=hanchor arialabel=Anchor># </span>å‡½æ•°</h1></a><a href=#å®šä¹‰><h2 id=å®šä¹‰><span class=hanchor arialabel=Anchor># </span>å®šä¹‰</h2></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kr>function</span> <span class=nf>function_name</span> <span class=p>(</span><span class=n>arc</span><span class=p>)</span>  <span class=c1>-- arc è¡¨ç¤ºå‚æ•°åˆ—è¡¨ï¼Œå‡½æ•°çš„å‚æ•°åˆ—è¡¨å¯ä»¥ä¸ºç©º</span>
</span></span><span class=line><span class=cl>    <span class=c1>-- body</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢çš„è¯­æ³•å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å‡½æ•°ï¼Œåä¸º <code>function_name</code>. å…¨å±€å‡½æ•°æœ¬è´¨ä¸Šå°±æ˜¯å‡½æ•°ç±»å‹çš„å€¼èµ‹ç»™äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå³ä¸Šé¢çš„è¯­æ³•ç­‰ä»·äº</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>function_name</span> <span class=o>=</span> <span class=kr>function</span> <span class=p>(</span><span class=n>arc</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=c1>-- body</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span></code></pre></td></tr></table></div></div><p>ç”±äºå…¨å±€å˜é‡ä¸€èˆ¬ä¼šæ±¡æŸ“å…¨å±€åå­—ç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿæœ‰æ€§èƒ½æŸè€—ï¼ˆå³æŸ¥è¯¢å…¨å±€ç¯å¢ƒè¡¨çš„å¼€é”€ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬åº”å½“å°½é‡ä½¿ç”¨â€œå±€éƒ¨å‡½æ•°â€ï¼Œå…¶è®°æ³•æ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯å¼€å¤´åŠ ä¸Š <code>local</code> ä¿®é¥°ç¬¦ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>function_name</span> <span class=p>(</span><span class=n>arc</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>-- body</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span></code></pre></td></tr></table></div></div><p>å®šä¹‰å‡½æ•°</p><ol><li><p>åˆ©ç”¨åå­—æ¥è§£é‡Šå‡½æ•°ã€å˜é‡çš„ç›®çš„ï¼Œä½¿äººé€šè¿‡åå­—å°±èƒ½çœ‹å‡ºæ¥å‡½æ•°ã€å˜é‡çš„ä½œç”¨ã€‚</p></li><li><p>æ¯ä¸ªå‡½æ•°çš„é•¿åº¦è¦å°½é‡æ§åˆ¶åœ¨ä¸€ä¸ªå±å¹•å†…ï¼Œä¸€çœ¼å¯ä»¥çœ‹æ˜ç™½ã€‚</p></li><li><p>è®©ä»£ç è‡ªå·±è¯´è¯ï¼Œä¸éœ€è¦æ³¨é‡Šæœ€å¥½ã€‚</p></li></ol><p>ç”±äºå‡½æ•°å®šä¹‰ç­‰ä»·äºå˜é‡èµ‹å€¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå‡½æ•°åæ›¿æ¢ä¸ºæŸä¸ª Lua è¡¨çš„æŸä¸ªå­—æ®µï¼Œä¾‹å¦‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>foo</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=kr>function</span> <span class=nc>foo</span><span class=p>.</span><span class=nf>pr</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=s2>&#34;ssss&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>foo.pr</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><a href=#å‚æ•°><h2 id=å‚æ•°><span class=hanchor arialabel=Anchor># </span>å‚æ•°</h2></a><a href=#æŒ‰å€¼ä¼ é€’><h3 id=æŒ‰å€¼ä¼ é€’><span class=hanchor arialabel=Anchor># </span>æŒ‰å€¼ä¼ é€’</h3></a><p><strong>Lua å‡½æ•°çš„å‚æ•°å¤§éƒ¨åˆ†æ˜¯æŒ‰å€¼ä¼ é€’çš„</strong>ã€‚<strong>å½“å‡½æ•°å‚æ•°æ˜¯ table ç±»å‹æ—¶ï¼Œä¼ é€’è¿›æ¥çš„æ˜¯å®é™…å‚æ•°çš„å¼•ç”¨</strong></p><p>å€¼ä¼ é€’å°±æ˜¯è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®å‚æŠŠå®ƒçš„å€¼é€šè¿‡èµ‹å€¼è¿ç®—ä¼ é€’ç»™å½¢å‚ï¼Œç„¶åå½¢å‚çš„æ”¹å˜å’Œå®å‚å°±æ²¡æœ‰å…³ç³»äº†ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå®å‚æ˜¯é€šè¿‡å®ƒåœ¨å‚æ•°è¡¨ä¸­çš„ä½ç½®ä¸å½¢å‚åŒ¹é…èµ·æ¥çš„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>swap</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span> <span class=c1>--å®šä¹‰å‡½æ•°swap,å‡½æ•°å†…éƒ¨è¿›è¡Œäº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>temp</span> <span class=o>=</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>    <span class=n>b</span> <span class=o>=</span> <span class=n>temp</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>x</span> <span class=o>=</span> <span class=s2>&#34;hello&#34;</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>20</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>swap</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>    <span class=c1>--è°ƒç”¨swapå‡½æ•°</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>   <span class=c1>--è°ƒç”¨swapå‡½æ•°åï¼Œxå’Œyçš„å€¼å¹¶æ²¡æœ‰äº¤æ¢</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=n>hello</span> <span class=mi>20</span>
</span></span><span class=line><span class=cl><span class=mi>20</span>  <span class=n>hello</span>
</span></span><span class=line><span class=cl><span class=n>hello</span> <span class=mi>20</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œ<strong>è‹¥å½¢å‚ä¸ªæ•°å’Œå®å‚ä¸ªæ•°ä¸åŒæ—¶ï¼ŒLua ä¼šè‡ªåŠ¨è°ƒæ•´å®å‚ä¸ªæ•°</strong>ã€‚è°ƒæ•´è§„åˆ™ï¼š</p><ul><li><p>è‹¥å®å‚ä¸ªæ•°å¤§äºå½¢å‚ä¸ªæ•°ï¼Œä»å·¦å‘å³ï¼Œå¤šä½™çš„å®å‚è¢«å¿½ç•¥ï¼›</p></li><li><p>è‹¥å®å‚ä¸ªæ•°å°äºå½¢å‚ä¸ªæ•°ï¼Œä»å·¦å‘å³ï¼Œ<strong>æ²¡æœ‰è¢«å®å‚åˆå§‹åŒ–çš„å½¢å‚ä¼šè¢«åˆå§‹åŒ–ä¸º nil</strong></p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>fun1</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>       <span class=c1>--ä¸¤ä¸ªå½¢å‚ï¼Œå¤šä½™çš„å®å‚è¢«å¿½ç•¥æ‰</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>fun2</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>d</span><span class=p>)</span> <span class=c1>--å››ä¸ªå½¢å‚ï¼Œæ²¡æœ‰è¢«å®å‚åˆå§‹åŒ–çš„å½¢å‚ï¼Œç”¨nilåˆå§‹åŒ–</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>d</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>z</span> <span class=o>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fun1</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span>         <span class=c1>-- zè¢«å‡½æ•°fun1å¿½ç•¥æ‰äº†ï¼Œå‚æ•°å˜æˆ x, y</span>
</span></span><span class=line><span class=cl><span class=n>fun2</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span>         <span class=c1>-- åé¢è‡ªåŠ¨åŠ ä¸Šä¸€ä¸ªnilï¼Œå‚æ•°å˜æˆ x, y, z, nil</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>   <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>   <span class=mi>2</span>   <span class=mi>3</span>   <span class=kc>nil</span>
</span></span></code></pre></td></tr></table></div></div><a href=#å˜é•¿å‚æ•°><h3 id=å˜é•¿å‚æ•°><span class=hanchor arialabel=Anchor># </span>å˜é•¿å‚æ•°</h3></a><p>å…¶å® Lua è¿˜æ”¯æŒå˜é•¿å‚æ•°ã€‚è‹¥å½¢å‚ä¸º <code>...</code>ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°å¯ä»¥æ¥æ”¶ä¸åŒé•¿åº¦çš„å‚æ•°ã€‚è®¿é—®å‚æ•°çš„æ—¶å€™ä¹Ÿè¦ä½¿ç”¨ <code>...</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>func</span><span class=p>(</span> <span class=p>...</span> <span class=p>)</span>                <span class=c1>-- å½¢å‚ä¸º ... ,è¡¨ç¤ºå‡½æ•°é‡‡ç”¨å˜é•¿å‚æ•°</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>temp</span> <span class=o>=</span> <span class=p>{...}</span>                     <span class=c1>-- è®¿é—®çš„æ—¶å€™ä¹Ÿè¦ä½¿ç”¨ ...</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>ans</span> <span class=o>=</span> <span class=n>table.concat</span><span class=p>(</span><span class=n>temp</span><span class=p>,</span> <span class=s2>&#34; &#34;</span><span class=p>)</span>    <span class=c1>-- ä½¿ç”¨ table.concat åº“å‡½æ•°å¯¹æ•°</span>
</span></span><span class=line><span class=cl>    <span class=c1>-- ç»„å†…å®¹ä½¿ç”¨ &#34; &#34; æ‹¼æ¥æˆå­—ç¬¦ä¸²ã€‚</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>ans</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>func</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>        <span class=c1>-- ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°</span>
</span></span><span class=line><span class=cl><span class=n>func</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>  <span class=c1>-- ä¼ é€’äº†å››ä¸ªå‚æ•°</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=mi>1</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>4</span>
</span></span></code></pre></td></tr></table></div></div><a href=#å…·åå‚æ•°><h3 id=å…·åå‚æ•°><span class=hanchor arialabel=Anchor># </span><strong>å…·åå‚æ•°</strong></h3></a><p>Lua è¿˜æ”¯æŒé€šè¿‡åç§°æ¥æŒ‡å®šå®å‚ï¼Œè¿™æ—¶å€™è¦æŠŠæ‰€æœ‰çš„å®å‚ç»„ç»‡åˆ°ä¸€ä¸ª table ä¸­ï¼Œå¹¶å°†è¿™ä¸ª table ä½œä¸ºå”¯ä¸€çš„å®å‚ä¼ ç»™å‡½æ•°ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>change</span><span class=p>(</span><span class=n>arg</span><span class=p>)</span> <span class=c1>-- change å‡½æ•°ï¼Œæ”¹å˜é•¿æ–¹å½¢çš„é•¿å’Œå®½ï¼Œä½¿å…¶å„å¢é•¿ä¸€å€</span>
</span></span><span class=line><span class=cl>  <span class=n>arg.width</span> <span class=o>=</span> <span class=n>arg.width</span> <span class=o>*</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>  <span class=n>arg.height</span> <span class=o>=</span> <span class=n>arg.height</span> <span class=o>*</span> <span class=mi>2</span><span class=kr>return</span> <span class=n>arg</span>
</span></span><span class=line><span class=cl><span class=n>endlocal</span> <span class=n>rectangle</span> <span class=o>=</span> <span class=p>{</span> <span class=n>width</span> <span class=o>=</span> <span class=mi>20</span><span class=p>,</span> <span class=n>height</span> <span class=o>=</span> <span class=mi>15</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=s2>&#34;before change:&#34;</span><span class=p>,</span> <span class=s2>&#34;width  =&#34;</span><span class=p>,</span> <span class=n>rectangle.width</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;height =&#34;</span><span class=p>,</span> <span class=n>rectangle.height</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>rectangle</span> <span class=o>=</span> <span class=n>change</span><span class=p>(</span><span class=n>rectangle</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=s2>&#34;after  change:&#34;</span><span class=p>,</span> <span class=s2>&#34;width  =&#34;</span><span class=p>,</span> <span class=n>rectangle.width</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;height =&#34;</span><span class=p>,</span> <span class=n>rectangle.height</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=n>before</span> <span class=n>change</span><span class=p>:</span> <span class=n>width</span> <span class=o>=</span> <span class=mi>20</span>  <span class=n>height</span> <span class=o>=</span>  <span class=mi>15</span>
</span></span><span class=line><span class=cl><span class=n>after</span>  <span class=n>change</span><span class=p>:</span> <span class=n>width</span> <span class=o>=</span> <span class=mi>40</span>  <span class=n>height</span> <span class=o>=</span>  <span class=mi>30</span>
</span></span></code></pre></td></tr></table></div></div><a href=#æŒ‰å¼•ç”¨ä¼ é€’><h3 id=æŒ‰å¼•ç”¨ä¼ é€’><span class=hanchor arialabel=Anchor># </span>æŒ‰å¼•ç”¨ä¼ é€’</h3></a><p><strong>å½“å‡½æ•°å‚æ•°æ˜¯ table ç±»å‹æ—¶ï¼Œä¼ é€’è¿›æ¥çš„æ˜¯å®é™…å‚æ•°çš„å¼•ç”¨</strong>ï¼Œæ­¤æ—¶åœ¨å‡½æ•°å†…éƒ¨å¯¹è¯¥ table æ‰€åšçš„ä¿®æ”¹ï¼Œä¼šç›´æ¥å¯¹è°ƒç”¨è€…æ‰€ä¼ é€’çš„å®é™…å‚æ•°ç”Ÿæ•ˆï¼Œè€Œæ— éœ€è‡ªå·±è¿”å›ç»“æœå’Œè®©è°ƒç”¨è€…è¿›è¡Œèµ‹å€¼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>function change(arg) --changeå‡½æ•°ï¼Œæ”¹å˜é•¿æ–¹å½¢çš„é•¿å’Œå®½ï¼Œä½¿å…¶å„å¢é•¿ä¸€å€
</span></span><span class=line><span class=cl>  arg.width = arg.width * 2  --è¡¨argä¸æ˜¯è¡¨rectangleçš„æ‹·è´ï¼Œä»–ä»¬æ˜¯åŒä¸€ä¸ªè¡¨
</span></span><span class=line><span class=cl>  arg.height = arg.height * 2end                  -- æ²¡æœ‰returnè¯­å¥äº†local rectangle = { width = 20, height = 15 }
</span></span><span class=line><span class=cl>print(&#34;before change:&#34;, &#34;width = &#34;, rectangle.width,
</span></span><span class=line><span class=cl>                        &#34; height = &#34;, rectangle.height)
</span></span><span class=line><span class=cl>change(rectangle)
</span></span><span class=line><span class=cl>print(&#34;after change:&#34;, &#34;width = &#34;, rectangle.width,
</span></span><span class=line><span class=cl>                       &#34; height =&#34;, rectangle.height)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--&gt; output
</span></span><span class=line><span class=cl>before change: width = 20  height = 15
</span></span><span class=line><span class=cl>after  change: width = 40  height = 30
</span></span></code></pre></td></tr></table></div></div><a href=#å‡½æ•°è¿”å›å€¼><h2 id=å‡½æ•°è¿”å›å€¼><span class=hanchor arialabel=Anchor># </span>å‡½æ•°è¿”å›å€¼</h2></a><p>Lua å…·æœ‰ä¸€é¡¹ä¸ä¼—ä¸åŒçš„ç‰¹æ€§ï¼Œå…è®¸å‡½æ•°è¿”å›å¤šä¸ªå€¼ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>swap</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>   
</span></span><span class=line><span class=cl>    <span class=c1>-- å®šä¹‰å‡½æ•° swapï¼Œå®ç°ä¸¤ä¸ªå˜é‡äº¤æ¢å€¼</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=n>b</span><span class=p>,</span> <span class=n>a</span>              
</span></span><span class=line><span class=cl>    <span class=c1>-- æŒ‰ç›¸åé¡ºåºè¿”å›å˜é‡çš„å€¼</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>20</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>swap</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>           <span class=c1>-- è°ƒç”¨ swap å‡½æ•°</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>                 <span class=c1>--&gt; output   20     1</span>
</span></span></code></pre></td></tr></table></div></div><p>å½“å‡½æ•°è¿”å›å€¼çš„ä¸ªæ•°å’Œæ¥æ”¶è¿”å›å€¼çš„å˜é‡çš„ä¸ªæ•°ä¸ä¸€è‡´æ—¶ï¼ŒLua ä¹Ÿä¼šè‡ªåŠ¨è°ƒæ•´å‚æ•°ä¸ªæ•°è°ƒæ•´è§„åˆ™ï¼š</p><ul><li><p>è‹¥è¿”å›å€¼ä¸ªæ•°å¤§äºæ¥æ”¶å˜é‡çš„ä¸ªæ•°ï¼Œå¤šä½™çš„è¿”å›å€¼ä¼šè¢«å¿½ç•¥æ‰ï¼›</p></li><li><p>è‹¥è¿”å›å€¼ä¸ªæ•°å°äºå‚æ•°ä¸ªæ•°ï¼Œä»å·¦å‘å³ï¼Œæ²¡æœ‰è¢«è¿”å›å€¼åˆå§‹åŒ–çš„å˜é‡ä¼šè¢«åˆå§‹åŒ–ä¸º nilã€‚</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kr>function</span> <span class=nf>init</span><span class=p>()</span>             
</span></span><span class=line><span class=cl>    <span class=c1>--init å‡½æ•° è¿”å›ä¸¤ä¸ªå€¼ 1 å’Œ &#34;lua&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;lua&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=n>init</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>=</span> <span class=n>init</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--output</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=mi>1</span> <span class=n>lua</span> <span class=kc>nil</span>
</span></span></code></pre></td></tr></table></div></div><p>å½“ä¸€ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªä»¥ä¸Šè¿”å›å€¼ï¼Œä¸”å‡½æ•°è°ƒç”¨ä¸æ˜¯ä¸€ä¸ªåˆ—è¡¨è¡¨è¾¾å¼çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå‡½æ•°è°ƒç”¨åªä¼šäº§ç”Ÿä¸€ä¸ªè¿”å›å€¼, ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªè¿”å›å€¼ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>init</span><span class=p>()</span>       <span class=c1>-- init å‡½æ•° è¿”å›ä¸¤ä¸ªå€¼ 1 å’Œ &#34;lua&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;lua&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>=</span> <span class=n>init</span><span class=p>(),</span> <span class=mi>2</span>   <span class=c1>-- init å‡½æ•°çš„ä½ç½®ä¸åœ¨æœ€åï¼Œæ­¤æ—¶åªè¿”å› 1</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span>              <span class=c1>--&gt;output  1  2  nil</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=n>init</span><span class=p>()</span>   <span class=c1>-- init å‡½æ•°çš„ä½ç½®åœ¨æœ€åï¼Œæ­¤æ—¶è¿”å› 1 å’Œ &#34;lua&#34;</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>)</span>              <span class=c1>--&gt;output  2  1  lua</span>
</span></span></code></pre></td></tr></table></div></div><p>å‡½æ•°è°ƒç”¨çš„å®å‚åˆ—è¡¨ä¹Ÿæ˜¯ä¸€ä¸ªåˆ—è¡¨è¡¨è¾¾å¼ã€‚è€ƒè™‘ä¸‹é¢çš„ä¾‹å­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>init</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;lua&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>init</span><span class=p>(),</span> <span class=mi>2</span><span class=p>)</span>   <span class=c1>--&gt;output  1  2</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>init</span><span class=p>())</span>   <span class=c1>--&gt;output  2  1  lua</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä½ ç¡®ä¿åªå–å‡½æ•°è¿”å›å€¼çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨æ‹¬å·è¿ç®—ç¬¦</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>init</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;lua&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>((</span><span class=n>init</span><span class=p>()),</span> <span class=mi>2</span><span class=p>)</span>   <span class=c1>--&gt;output  1  2</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=p>(</span><span class=n>init</span><span class=p>()))</span>   <span class=c1>--&gt;output  2  1</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¦‚æœå®å‚åˆ—è¡¨ä¸­æŸä¸ªå‡½æ•°ä¼šè¿”å›å¤šä¸ªå€¼ï¼ŒåŒæ—¶è°ƒç”¨è€…åˆæ²¡æœ‰æ˜¾å¼åœ°ä½¿ç”¨æ‹¬å·è¿ç®—ç¬¦æ¥ç­›é€‰å’Œè¿‡æ»¤ï¼Œåˆ™è¿™æ ·çš„è¡¨è¾¾å¼æ˜¯ä¸èƒ½è¢« LuaJIT 2 æ‰€ JIT ç¼–è¯‘çš„ï¼Œè€Œåªèƒ½è¢«è§£é‡Šæ‰§è¡Œã€‚</strong></p><a href=#å…¨åŠ¨æ€å‡½æ•°è°ƒç”¨><h1 id=å…¨åŠ¨æ€å‡½æ•°è°ƒç”¨><span class=hanchor arialabel=Anchor># </span>å…¨åŠ¨æ€å‡½æ•°è°ƒç”¨</h1></a><p>è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠä¸€ä¸ªæ•°ç»„å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>args</span> <span class=o>=</span> <span class=p>{...}</span> <span class=ow>or</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=n>method_name</span><span class=p>(</span><span class=n>unpack</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>table.maxn</span><span class=p>(</span><span class=n>args</span><span class=p>)))</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>run</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=s1>&#39;run&#39;</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>attack</span><span class=p>(</span><span class=n>targetId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=s1>&#39;targetId&#39;</span><span class=p>,</span> <span class=n>targetId</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>do_action</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=p>...)</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>args</span> <span class=o>=</span> <span class=p>{...}</span> <span class=ow>or</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=n>method</span><span class=p>(</span><span class=n>unpack</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>table.maxn</span><span class=p>(</span><span class=n>args</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>do_action</span><span class=p>(</span><span class=n>run</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>         <span class=c1>-- output: run 1 2</span>
</span></span><span class=line><span class=cl><span class=n>do_action</span><span class=p>(</span><span class=n>attack</span><span class=p>,</span> <span class=mi>1111</span><span class=p>)</span>      <span class=c1>-- output: targetId    1111</span>
</span></span></code></pre></td></tr></table></div></div><a href=#æ¨¡å—><h1 id=æ¨¡å—><span class=hanchor arialabel=Anchor># </span>æ¨¡å—</h1></a><p>ä» Lua 5.1 è¯­è¨€æ·»åŠ äº†å¯¹æ¨¡å—å’ŒåŒ…çš„æ”¯æŒã€‚ä¸€<strong>ä¸ª Lua æ¨¡å—çš„æ•°æ®ç»“æ„æ˜¯ç”¨ä¸€ä¸ª Lua å€¼ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ª Lua è¡¨æˆ–è€… Lua å‡½æ•°ï¼‰</strong>ã€‚<strong>ä¸€ä¸ª Lua æ¨¡å—ä»£ç å°±æ˜¯ä¸€ä¸ªä¼šè¿”å›è¿™ä¸ª Lua å€¼çš„ä»£ç å—</strong></p><ul><li><p>å¯ä»¥ä½¿ç”¨å†…å»ºå‡½æ•° <code>require()</code> æ¥åŠ è½½å’Œç¼“å­˜æ¨¡å—ã€‚</p></li><li><p>ç®€å•çš„è¯´ï¼Œä¸€ä¸ªä»£ç æ¨¡å—å°±æ˜¯ä¸€ä¸ªç¨‹åºåº“ï¼Œå¯ä»¥é€šè¿‡ <code>require</code> æ¥åŠ è½½ã€‚<strong>æ¨¡å—åŠ è½½åçš„ç»“æœé€šè¿‡æ˜¯ä¸€ä¸ª Lua table</strong></p></li><li><p><strong>è¿™ä¸ªè¡¨å°±åƒæ˜¯ä¸€ä¸ªå‘½åç©ºé—´</strong>ï¼Œå…¶å†…å®¹å°±æ˜¯æ¨¡å—ä¸­å¯¼å‡ºçš„æ‰€æœ‰ä¸œè¥¿ï¼Œ<strong>æ¯”å¦‚å‡½æ•°å’Œå˜é‡</strong>ã€‚<code>require</code> å‡½æ•°ä¼šè¿”å› Lua æ¨¡å—åŠ è½½åçš„ç»“æœï¼Œå³ç”¨äºè¡¨ç¤ºè¯¥ Lua æ¨¡å—çš„ Lua å€¼ã€‚</p></li></ul><p>Lua æä¾›äº†ä¸€ä¸ªåä¸º <code>require</code> çš„å‡½æ•°ç”¨æ¥åŠ è½½æ¨¡å—ã€‚<strong>è¦åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œåªéœ€è¦ç®€å•åœ°è°ƒç”¨</strong> <strong><code>require</code></strong> <strong>&ldquo;file&rdquo; å°±å¯ä»¥äº†ï¼Œfile æŒ‡æ¨¡å—æ‰€åœ¨çš„æ–‡ä»¶å</strong>ã€‚è¿™ä¸ªè°ƒç”¨ä¼šè¿”å›ä¸€ä¸ªç”±æ¨¡å—å‡½æ•°ç»„æˆçš„ tableï¼Œå¹¶ä¸”è¿˜ä¼šå®šä¹‰ä¸€ä¸ªåŒ…å«è¯¥ table çš„å…¨å±€å˜é‡ã€‚</p><p>åœ¨ Lua ä¸­åˆ›å»ºä¸€ä¸ªæ¨¡å—æœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼š<strong>åˆ›å»ºä¸€ä¸ª tableï¼Œå¹¶å°†æ‰€æœ‰éœ€è¦å¯¼å‡ºçš„å‡½æ•°æ”¾å…¥å…¶ä¸­ï¼Œæœ€åè¿”å›è¿™ä¸ª table å°±å¯ä»¥äº†ã€‚ç›¸å½“äºå°†å¯¼å‡ºçš„å‡½æ•°ä½œä¸º table çš„ä¸€ä¸ªå­—æ®µï¼Œåœ¨ Lua ä¸­å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å€¼ï¼Œæä¾›äº†å¤©ç„¶çš„ä¼˜åŠ¿ã€‚</strong></p><ul><li>åˆ›å»º my. Lua</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>_M</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>get_name</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=s2>&#34;Lucy&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=kr>function</span> <span class=nc>_M</span><span class=p>.</span><span class=nf>greeting</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=s2>&#34;hello &#34;</span> <span class=o>..</span> <span class=n>get_name</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>return</span> <span class=n>_M</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>æŠŠä¸‹é¢ä»£ç ä¿å­˜åœ¨æ–‡ä»¶ main. Lua ä¸­ï¼Œç„¶åæ‰§è¡Œ main. Luaï¼Œè°ƒç”¨ä¸Šè¿°æ¨¡å—ã€‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>my_module</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s2>&#34;my&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>my_module.greeting</span><span class=p>()</span>     <span class=c1>--&gt;output: hello Lucy</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><ul><li><p>å¯¹äºéœ€è¦å¯¼å‡ºç»™å¤–éƒ¨ä½¿ç”¨çš„å…¬å…±æ¨¡å—ï¼Œå¤„äºå®‰å…¨è€ƒè™‘ï¼Œ<strong>æ˜¯è¦é¿å…å…¨å±€å˜é‡çš„å‡ºç°</strong>ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ lj-releng æˆ– luacheck å·¥å…·å®Œæˆå…¨å±€å˜é‡çš„æ£€æµ‹ã€‚è‡³äºå¦‚ä½•åšï¼Œåˆ°åé¢å†è®²ã€‚</p></li><li><p>å¦ä¸€ä¸ªè¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºåœ¨ LuaJIT ä¸­ï¼Œ<strong>require å‡½æ•°å†…ä¸èƒ½è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼Œ<strong>æ‰€ä»¥ä¸èƒ½å¤Ÿåœ¨æ¨¡å—çš„é¡¶çº§ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ cosocket ä¸€ç±»çš„ API</strong>ã€‚å¦åˆ™ä¼šæŠ¥ <code>attempt to yield across C-call boundary</code> é”™è¯¯ã€‚</p></li></ul></blockquote><a href=#string><h1 id=string><span class=hanchor arialabel=Anchor># </span>String</h1></a><p>Lua å­—ç¬¦ä¸²æ€»æ˜¯ç”±å­—èŠ‚æ„æˆçš„ã€‚Lua æ ¸å¿ƒå¹¶ä¸å°è¯•ç†è§£å…·ä½“çš„å­—ç¬¦é›†ç¼–ç ï¼ˆæ¯”å¦‚ GBK å’Œ UTF-8 è¿™æ ·çš„å¤šå­—èŠ‚å­—ç¬¦ç¼–ç ï¼‰</p><p>Lua å­—ç¬¦ä¸²å†…éƒ¨ç”¨æ¥æ ‡è¯†å„ä¸ªç»„æˆå­—èŠ‚çš„ä¸‹æ ‡æ˜¯ä» 1 å¼€å§‹çš„ï¼Œè¿™ä¸åŒäºåƒ C å’Œ Perl è¿™æ ·çš„ç¼–ç¨‹è¯­è¨€ã€‚è¿™æ ·æ•°å­—ç¬¦ä¸²ä½ç½®çš„æ—¶å€™å†ä¹Ÿä¸ç”¨è°ƒæ•´ï¼Œå¯¹äºéä¸“ä¸šçš„å¼€å‘è€…æ¥è¯´å¯èƒ½ä¹Ÿæ˜¯ä¸€ä¸ªå¥½äº‹æƒ…ï¼Œ<strong>string.Sub (str, 3, 7) ç›´æ¥è¡¨ç¤ºä»ç¬¬ä¸‰ä¸ªå­—ç¬¦å¼€å§‹åˆ°ç¬¬ä¸ƒä¸ªå­—ç¬¦ï¼ˆå«ï¼‰ä¸ºæ­¢çš„å­ä¸²ã€‚</strong></p><a href=#stringbyte-s--i--j-><h2 id=stringbyte-s--i--j-><span class=hanchor arialabel=Anchor># </span><strong>string.Byte (s [, i [, j ]])</strong></h2></a><p>è¿”å›å­—ç¬¦ s[i]ã€s[i + 1]ã€s[i + 2]ã€Â·Â·Â·Â·Â·Â·ã€s[j] æ‰€å¯¹åº”çš„ ASCII ç </p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.byte</span><span class=p>(</span><span class=s2>&#34;abc&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.byte</span><span class=p>(</span><span class=s2>&#34;abc&#34;</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span> <span class=c1>-- ç¼ºå°‘ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°é»˜è®¤ä¸ç¬¬äºŒä¸ªç›¸åŒï¼Œæ­¤æ—¶ä¸º 3</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.byte</span><span class=p>(</span><span class=s2>&#34;abc&#34;</span><span class=p>))</span>    <span class=c1>-- ç¼ºå°‘ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ­¤æ—¶è¿™ä¸¤ä¸ªå‚æ•°éƒ½é»˜è®¤ä¸º 1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=mi>97</span>    <span class=mi>98</span>    <span class=mi>99</span>
</span></span><span class=line><span class=cl><span class=mi>99</span>
</span></span><span class=line><span class=cl><span class=mi>97</span>
</span></span></code></pre></td></tr></table></div></div><a href=#string-char-><h2 id=string-char-><span class=hanchor arialabel=Anchor># </span><strong>string. Char (&mldr;)</strong></h2></a><p>æ¥æ”¶ 0 ä¸ªæˆ–æ›´å¤šçš„æ•´æ•°ï¼ˆæ•´æ•°èŒƒå›´ï¼š0~255ï¼‰ï¼Œè¿”å›è¿™äº›æ•´æ•°æ‰€å¯¹åº”çš„ ASCII ç å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚å½“å‚æ•°ä¸ºç©ºæ—¶ï¼Œé»˜è®¤æ˜¯ä¸€ä¸ª 0ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.char</span><span class=p>(</span><span class=mi>96</span><span class=p>,</span> <span class=mi>97</span><span class=p>,</span> <span class=mi>98</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.char</span><span class=p>())</span>        <span class=c1>-- å‚æ•°ä¸ºç©ºï¼Œé»˜è®¤æ˜¯ä¸€ä¸ª0ï¼Œ-- ä½ å¯ä»¥ç”¨string.byte(string.char())æµ‹è¯•ä¸€ä¸‹print(string.char(65, 66))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt; output</span>
</span></span><span class=line><span class=cl><span class=err>`</span><span class=n>ab</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>AB</span>
</span></span></code></pre></td></tr></table></div></div><a href=#stringupper-s><h2 id=stringupper-s><span class=hanchor arialabel=Anchor># </span><strong>string.Upper (s)</strong></h2></a><p>æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œè¿”å›ä¸€ä¸ªæŠŠæ‰€æœ‰å°å†™å­—æ¯å˜æˆå¤§å†™å­—æ¯çš„å­—ç¬¦ä¸²ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.upper</span><span class=p>(</span><span class=s2>&#34;Hello Lua&#34;</span><span class=p>))</span>  <span class=c1>--&gt;output  HELLO LUA</span>
</span></span></code></pre></td></tr></table></div></div><a href=#stringlower-s><h2 id=stringlower-s><span class=hanchor arialabel=Anchor># </span><strong>string.Lower (s)</strong></h2></a><p>æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œè¿”å›ä¸€ä¸ªæŠŠæ‰€æœ‰å¤§å†™å­—æ¯å˜æˆå°å†™å­—æ¯çš„å­—ç¬¦ä¸²ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.lower</span><span class=p>(</span><span class=s2>&#34;Hello Lua&#34;</span><span class=p>))</span>  <span class=c1>--&gt;output   hello lua</span>
</span></span></code></pre></td></tr></table></div></div><a href=#stringlen-s><h2 id=stringlen-s><span class=hanchor arialabel=Anchor># </span><strong>string.Len (s)</strong></h2></a><p>æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›å®ƒçš„é•¿åº¦ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.len</span><span class=p>(</span><span class=s2>&#34;hello lua&#34;</span><span class=p>))</span> <span class=c1>--&gt;output  9</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨æ­¤å‡½æ•°æ˜¯ä¸æ¨èçš„ã€‚åº”å½“æ€»æ˜¯ä½¿ç”¨ <code>#</code> è¿ç®—ç¬¦æ¥è·å– Lua å­—ç¬¦ä¸²çš„é•¿åº¦</p><a href=#stringfind-s-p--init--plain><h2 id=stringfind-s-p--init--plain><span class=hanchor arialabel=Anchor># </span><strong>string.Find (s, p [, init [, plain]])</strong></h2></a><p>åœ¨ s å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡åŒ¹é… p å­—ç¬¦ä¸²ã€‚è‹¥åŒ¹é…æˆåŠŸï¼Œåˆ™è¿”å› p å­—ç¬¦ä¸²åœ¨ s å­—ç¬¦ä¸²ä¸­å‡ºç°çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼›è‹¥åŒ¹é…å¤±è´¥ï¼Œåˆ™è¿”å› nil,</p><p>ç¬¬ä¸‰ä¸ªå‚æ•°ç¬¬ä¸‰ä¸ªå‚æ•° init é»˜è®¤ä¸º 1ï¼Œå¹¶ä¸”å¯ä»¥ä¸ºè´Ÿæ•´æ•°ï¼Œ</p><p>å½“ init ä¸ºè´Ÿæ•°æ—¶ï¼Œè¡¨ç¤ºä» s å­—ç¬¦ä¸²çš„ string.Len (s) + init + 1 ç´¢å¼•å¤„å¼€å§‹å‘ååŒ¹é…å­—ç¬¦ä¸² p ã€‚</p><p>ç¬¬å››ä¸ªå‚æ•°é»˜è®¤ä¸º falseï¼Œå½“å…¶ä¸º true æ—¶ï¼Œåªä¼šæŠŠ p çœ‹æˆä¸€ä¸ªå­—ç¬¦ä¸²å¯¹å¾…ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>find</span> <span class=o>=</span> <span class=n>string.find</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;abc cba&#34;</span><span class=p>,</span> <span class=s2>&#34;ab&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;abc cba&#34;</span><span class=p>,</span> <span class=s2>&#34;ab&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>     <span class=c1>-- ä»ç´¢å¼•ä¸º2çš„ä½ç½®å¼€å§‹åŒ¹é…å­—ç¬¦ä¸²ï¼šab</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;abc cba&#34;</span><span class=p>,</span> <span class=s2>&#34;ba&#34;</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>))</span>    <span class=c1>-- ä»ç´¢å¼•ä¸º7çš„ä½ç½®å¼€å§‹åŒ¹é…å­—ç¬¦ä¸²ï¼šba</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;abc cba&#34;</span><span class=p>,</span> <span class=s2>&#34;ba&#34;</span><span class=p>,</span> <span class=o>-</span><span class=mi>3</span><span class=p>))</span>    <span class=c1>-- ä»ç´¢å¼•ä¸º5çš„ä½ç½®å¼€å§‹åŒ¹é…å­—ç¬¦ä¸²ï¼šba</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;abc cba&#34;</span><span class=p>,</span> <span class=s2>&#34;(%a+)&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>  <span class=c1>-- ä»ç´¢å¼•ä¸º1å¤„åŒ¹é…æœ€é•¿è¿ç»­ä¸”åªå«å­—æ¯çš„å­—ç¬¦ä¸²</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;abc cba&#34;</span><span class=p>,</span> <span class=s2>&#34;(%a+)&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>true</span><span class=p>))</span> <span class=c1>--ä»ç´¢å¼•ä¸º1çš„ä½ç½®å¼€å§‹åŒ¹é…å­—ç¬¦ä¸²ï¼š(%a+)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>   <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=mi>6</span>   <span class=mi>7</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>   <span class=mi>3</span>   <span class=n>abc</span>
</span></span><span class=line><span class=cl><span class=kc>nil</span>
</span></span></code></pre></td></tr></table></div></div><a href=#stringformat-formatstring-><h2 id=stringformat-formatstring-><span class=hanchor arialabel=Anchor># </span><strong>string.Format (formatstring, &mldr;)</strong></h2></a><p>æŒ‰ç…§æ ¼å¼åŒ–å‚æ•° formatstringï¼Œè¿”å›åé¢ <code>...</code> å†…å®¹çš„æ ¼å¼åŒ–ç‰ˆæœ¬</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>print(string.format(&#34;%.4f&#34;, 3.1415926))     -- ä¿ç•™4ä½å°æ•°
</span></span><span class=line><span class=cl>print(string.format(&#34;%d %x %o&#34;, 31, 31, 31))-- åè¿›åˆ¶æ•°31è½¬æ¢æˆä¸åŒè¿›åˆ¶
</span></span><span class=line><span class=cl>d = 29; m = 7; y = 2015                     -- ä¸€è¡ŒåŒ…å«å‡ ä¸ªè¯­å¥ï¼Œç”¨ï¼›åˆ†å¼€
</span></span><span class=line><span class=cl>print(string.format(&#34;%s %02d/%02d/%d&#34;, &#34;today is:&#34;, d, m, y))
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--&gt;output
</span></span><span class=line><span class=cl>3.1416
</span></span><span class=line><span class=cl>31 1f 37
</span></span><span class=line><span class=cl>today is: 29/07/2015
</span></span></code></pre></td></tr></table></div></div><a href=#stringmatch-s-p--init><h2 id=stringmatch-s-p--init><span class=hanchor arialabel=Anchor># </span><strong>string.Match (s, p [, init])</strong></h2></a><p>åœ¨å­—ç¬¦ä¸² s ä¸­åŒ¹é…ï¼ˆæ¨¡å¼ï¼‰å­—ç¬¦ä¸² pï¼Œè‹¥åŒ¹é…æˆåŠŸï¼Œåˆ™è¿”å›ç›®æ ‡å­—ç¬¦ä¸²ä¸­ä¸æ¨¡å¼åŒ¹é…çš„å­ä¸²ï¼›å¦åˆ™è¿”å› nilã€‚ç¬¬ä¸‰ä¸ªå‚æ•° init é»˜è®¤ä¸º 1ï¼Œå¹¶ä¸”å¯ä»¥ä¸ºè´Ÿæ•´æ•°ï¼Œå½“ init ä¸ºè´Ÿæ•°æ—¶ï¼Œè¡¨ç¤ºä» s å­—ç¬¦ä¸²çš„ string.Len (s) + init + 1 ç´¢å¼•å¤„å¼€å§‹å‘ååŒ¹é…å­—ç¬¦ä¸² pã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.match</span><span class=p>(</span><span class=s2>&#34;hello lua&#34;</span><span class=p>,</span> <span class=s2>&#34;lua&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.match</span><span class=p>(</span><span class=s2>&#34;lua lua&#34;</span><span class=p>,</span> <span class=s2>&#34;lua&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>  <span class=c1>--åŒ¹é…åé¢é‚£ä¸ªluaprint(string.match(&#34;lua lua&#34;, &#34;hello&#34;))</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.match</span><span class=p>(</span><span class=s2>&#34;today is 27/7/2015&#34;</span><span class=p>,</span> <span class=s2>&#34;%d+/%d+/%d+&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=n>lua</span>
</span></span><span class=line><span class=cl><span class=n>lua</span>
</span></span><span class=line><span class=cl><span class=n>nil27</span><span class=o>/</span><span class=mi>7</span><span class=o>/</span><span class=mi>2015</span>
</span></span></code></pre></td></tr></table></div></div><a href=#stringgmatch-s-p><h2 id=stringgmatch-s-p><span class=hanchor arialabel=Anchor># </span><strong>string.Gmatch (s, p)</strong></h2></a><p>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å‡½æ•°ï¼Œé€šè¿‡è¿™ä¸ªè¿­ä»£å™¨å‡½æ•°å¯ä»¥éå†åˆ°åœ¨å­—ç¬¦ä¸² s ä¸­å‡ºç°æ¨¡å¼ä¸² p çš„æ‰€æœ‰åœ°æ–¹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>s</span> <span class=o>=</span> <span class=s2>&#34;hello world from Lua&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>for</span> <span class=n>w</span> <span class=kr>in</span> <span class=n>string.gmatch</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=s2>&#34;%a+&#34;</span><span class=p>)</span> <span class=kr>do</span>  <span class=c1>--åŒ¹é…æœ€é•¿è¿ç»­ä¸”åªå«å­—æ¯çš„å­—ç¬¦ä¸²</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>w</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=n>hello</span>
</span></span><span class=line><span class=cl><span class=n>world</span>
</span></span><span class=line><span class=cl><span class=n>from</span>
</span></span><span class=line><span class=cl><span class=n>Lua</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>t</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=n>s</span> <span class=o>=</span> <span class=s2>&#34;from=world, to=Lua&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=kr>in</span> <span class=n>string.gmatch</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=s2>&#34;(%a+)=(%a+)&#34;</span><span class=p>)</span> <span class=kr>do</span>  <span class=c1>--åŒ¹é…ä¸¤ä¸ªæœ€é•¿è¿ç»­ä¸”åªå«å­—æ¯çš„</span>
</span></span><span class=line><span class=cl>    <span class=n>t</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=n>v</span>                                    <span class=c1>--å­—ç¬¦ä¸²ï¼Œå®ƒä»¬ä¹‹é—´ç”¨ç­‰å·è¿æ¥</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=kr>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=kr>in</span> <span class=n>pairs</span><span class=p>(</span><span class=n>t</span><span class=p>)</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span> <span class=p>(</span><span class=n>k</span><span class=p>,</span><span class=n>v</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=n>to</span>      <span class=n>Lua</span>
</span></span><span class=line><span class=cl><span class=n>from</span>    <span class=n>worl</span>
</span></span></code></pre></td></tr></table></div></div><a href=#stringrep-s-n><h2 id=stringrep-s-n><span class=hanchor arialabel=Anchor># </span><strong>string.Rep (s, n)</strong></h2></a><p>è¿”å›å­—ç¬¦ä¸² s çš„ n æ¬¡æ‹·è´ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.rep</span><span class=p>(</span><span class=s2>&#34;abc&#34;</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--æ‹·è´3æ¬¡&#34;abc&#34;--&gt;output  abcabcabc</span>
</span></span></code></pre></td></tr></table></div></div><a href=#stringsub-s-i--j><h2 id=stringsub-s-i--j><span class=hanchor arialabel=Anchor># </span><strong>string.Sub (s, i [, j])</strong></h2></a><p>è¿”å›å­—ç¬¦ä¸² s ä¸­ï¼Œç´¢å¼• i åˆ°ç´¢å¼• j ä¹‹é—´çš„å­å­—ç¬¦ä¸²ã€‚å½“ j ç¼ºçœæ—¶ï¼Œé»˜è®¤ä¸º -1ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸² s çš„æœ€åä½ç½®ã€‚I å¯ä»¥ä¸ºè´Ÿæ•°ã€‚å½“ç´¢å¼• i åœ¨å­—ç¬¦ä¸² s çš„ä½ç½®åœ¨ç´¢å¼• j çš„åé¢æ—¶ï¼Œå°†è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.sub</span><span class=p>(</span><span class=s2>&#34;Hello Lua&#34;</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>7</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.sub</span><span class=p>(</span><span class=s2>&#34;Hello Lua&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.sub</span><span class=p>(</span><span class=s2>&#34;Hello Lua&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>    <span class=c1>--çœ‹åˆ°è¿”å›ä»€ä¹ˆäº†å—print(string.sub(&#34;Hello Lua&#34;, -3, -1))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=n>lo</span> <span class=n>L</span>
</span></span><span class=line><span class=cl><span class=n>ello</span> <span class=n>Lua</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Lua</span>
</span></span></code></pre></td></tr></table></div></div><a href=#stringgsub-s-p-r--n><h2 id=stringgsub-s-p-r--n><span class=hanchor arialabel=Anchor># </span><strong>string.Gsub (s, p, r [, n])</strong></h2></a><p>å°†ç›®æ ‡å­—ç¬¦ä¸² s ä¸­æ‰€æœ‰çš„å­ä¸² p æ›¿æ¢æˆå­—ç¬¦ä¸² rã€‚å¯é€‰å‚æ•° nï¼Œè¡¨ç¤ºé™åˆ¶æ›¿æ¢æ¬¡æ•°ã€‚è¿”å›å€¼æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯è¢«æ›¿æ¢åçš„å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªæ˜¯æ›¿æ¢äº†å¤šå°‘æ¬¡ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>print(string.gsub(&#34;Lua Lua Lua&#34;, &#34;Lua&#34;, &#34;hello&#34;))
</span></span><span class=line><span class=cl>print(string.gsub(&#34;Lua Lua Lua&#34;, &#34;Lua&#34;, &#34;hello&#34;, 2)) --æŒ‡æ˜ç¬¬å››ä¸ªå‚æ•°--&gt;output
</span></span><span class=line><span class=cl>hello hello hello   3
</span></span><span class=line><span class=cl>hello hello Lua     2
</span></span></code></pre></td></tr></table></div></div><a href=#string-reverse-s><h2 id=string-reverse-s><span class=hanchor arialabel=Anchor># </span><strong>string. Reverse (s)</strong></h2></a><p>æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²çš„åè½¬</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>string.reverse</span><span class=p>(</span><span class=s2>&#34;Hello Lua&#34;</span><span class=p>))</span>  <span class=c1>--&gt; output: auL olleH</span>
</span></span></code></pre></td></tr></table></div></div><a href=#table><h1 id=table><span class=hanchor arialabel=Anchor># </span>Table</h1></a><a href=#ä¸‹æ ‡ä»-1-å¼€å§‹><h2 id=ä¸‹æ ‡ä»-1-å¼€å§‹><span class=hanchor arialabel=Anchor># </span><strong>ä¸‹æ ‡ä» 1 å¼€å§‹</strong></h2></a><p>æ•°ç»„ä¸‹æ ‡ä» 1 å¼€å§‹è®¡æ•°ã€‚</p><p>è€Œ Lua æœ€åˆè®¾è®¡æ˜¯ä¸€ç§ç±»ä¼¼ XML çš„æ•°æ®æè¿°è¯­è¨€ï¼Œæ‰€ä»¥ç´¢å¼•ï¼ˆindexï¼‰ååº”çš„æ˜¯æ•°æ®åœ¨é‡Œé¢çš„ä½ç½®ï¼Œè€Œä¸æ˜¯åç§»é‡ã€‚</p><p>åœ¨åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„çš„æ—¶å€™ï¼Œ<strong>è‹¥ä¸æ˜¾å¼åœ°ç”¨é”®å€¼å¯¹æ–¹å¼èµ‹å€¼ï¼Œåˆ™ä¼šé»˜è®¤ç”¨æ•°å­—ä½œä¸ºä¸‹æ ‡</strong>ï¼Œä» 1 å¼€å§‹ã€‚ç”±äºåœ¨ <em>Lua</em> å†…éƒ¨å®é™…é‡‡ç”¨å“ˆå¸Œè¡¨å’Œæ•°ç»„åˆ†åˆ«ä¿å­˜é”®å€¼å¯¹ã€æ™®é€šå€¼ï¼Œæ‰€ä»¥ä¸æ¨èæ··åˆä½¿ç”¨è¿™ä¸¤ç§èµ‹å€¼æ–¹å¼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>color</span><span class=o>=</span><span class=p>{</span><span class=n>first</span><span class=o>=</span><span class=s2>&#34;red&#34;</span><span class=p>,</span> <span class=s2>&#34;blue&#34;</span><span class=p>,</span> <span class=n>third</span><span class=o>=</span><span class=s2>&#34;green&#34;</span><span class=p>,</span> <span class=s2>&#34;yellow&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>color</span><span class=p>[</span><span class=s2>&#34;first&#34;</span><span class=p>])</span>                 <span class=c1>--&gt; output: red</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>color</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>                       <span class=c1>--&gt; output: blue</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>color</span><span class=p>[</span><span class=s2>&#34;third&#34;</span><span class=p>])</span>                 <span class=c1>--&gt; output: green</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>color</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>                       <span class=c1>--&gt; output: yellow</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>color</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span>                       <span class=c1>--&gt; output: nil</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><p><strong>å½“æˆ‘ä»¬æŠŠ table å½“ä½œæ ˆæˆ–è€…é˜Ÿåˆ—ä½¿ç”¨çš„æ—¶å€™ï¼Œå®¹æ˜“çŠ¯é”™ï¼Œè¿½åŠ åˆ° table çš„æœ«å°¾ç”¨çš„æ˜¯</strong> <strong><code>s[#s+1] = something</code>****, è€Œä¸æ˜¯</strong> <strong><code>s[#s] = something</code></strong></p></li><li><p>è€Œä¸”å¦‚æœè¿™ä¸ª something æ˜¯ä¸€ä¸ª nil çš„è¯**ï¼Œä¼šå¯¼è‡´è¿™ä¸€æ¬¡å‹æ ˆï¼ˆæˆ–è€…å…¥é˜Ÿåˆ—ï¼‰æ²¡æœ‰å­˜å…¥ä»»ä½•ä¸œè¥¿**ï¼Œ s çš„å€¼æ²¡æœ‰å˜</p></li><li><p>å¦‚æœ <code>s = { 1, 2, 3, 4, 5, 6 }</code>ï¼Œä½ ä»¤ <code>s[4] = nil</code>ï¼Œ s ä¼šä»¤ä½ â€œåŒªå¤·æ‰€æ€â€åœ°å˜æˆ 3ã€‚</p></li></ul><a href=#table-getn-è·å–é•¿åº¦><h2 id=table-getn-è·å–é•¿åº¦><span class=hanchor arialabel=Anchor># </span><strong>table. Getn è·å–é•¿åº¦</strong></h2></a><p>å–é•¿åº¦æ“ä½œç¬¦å†™ä½œä¸€å…ƒæ“ä½œ ã€‚å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯å®ƒçš„å­—èŠ‚æ•°ï¼ˆå°±æ˜¯ä»¥ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—èŠ‚è®¡ç®—çš„å­—ç¬¦ä¸²é•¿åº¦ï¼‰</p><ul><li><p>å¯¹äºå¸¸è§„çš„æ•°ç»„ï¼Œé‡Œé¢ä» 1 åˆ° n æ”¾ç€ä¸€äº›éç©ºçš„å€¼çš„æ—¶å€™ï¼Œå®ƒçš„é•¿åº¦å°±ç²¾ç¡®çš„ä¸º nï¼Œå³æœ€åä¸€ä¸ªå€¼çš„ä¸‹æ ‡</p></li><li><p>å¦‚æœæ•°ç»„æœ‰ä¸€ä¸ªâ€œç©ºæ´â€ï¼ˆ<strong>å°±æ˜¯è¯´ï¼Œnil å€¼è¢«å¤¹åœ¨éç©ºå€¼ä¹‹é—´</strong>ï¼‰ï¼Œ<strong>é‚£ä¹ˆ t å¯èƒ½æ˜¯æŒ‡å‘ä»»ä½•ä¸€ä¸ªæ˜¯ nil å€¼çš„å‰ä¸€ä¸ªä½ç½®çš„ä¸‹æ ‡</strong></p></li><li><p>è¿™ä¹Ÿå°±è¯´æ˜å¯¹äºæœ‰â€œç©ºæ´â€çš„æƒ…å†µï¼Œtable çš„é•¿åº¦å­˜åœ¨ä¸€å®šçš„ <strong>ä¸å¯ç¡®å®šæ€§</strong></p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>tblTest1</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>1</span><span class=p>,</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=s2>&#34;Test1 &#34;</span> <span class=o>..</span> <span class=n>table.getn</span><span class=p>(</span><span class=n>tblTest1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>tblTest2</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>nil</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=s2>&#34;Test2 &#34;</span> <span class=o>..</span> <span class=n>table.getn</span><span class=p>(</span><span class=n>tblTest2</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>tblTest3</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>nil</span><span class=p>,</span> <span class=mi>2</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=s2>&#34;Test3 &#34;</span> <span class=o>..</span> <span class=n>table.getn</span><span class=p>(</span><span class=n>tblTest3</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>tblTest4</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>nil</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=kc>nil</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=s2>&#34;Test4 &#34;</span> <span class=o>..</span> <span class=n>table.getn</span><span class=p>(</span><span class=n>tblTest4</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>tblTest5</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>nil</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=kc>nil</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=kc>nil</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=s2>&#34;Test5 &#34;</span> <span class=o>..</span> <span class=n>table.getn</span><span class=p>(</span><span class=n>tblTest5</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>tblTest6</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>nil</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=kc>nil</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=kc>nil</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=kc>nil</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=s2>&#34;Test6 &#34;</span> <span class=o>..</span> <span class=n>table.getn</span><span class=p>(</span><span class=n>tblTest6</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘ä»¬ä½¿ç”¨ Lua 5.1 å’Œ LuaJIT 2.1 åˆ†åˆ«æ‰§è¡Œè¿™ä¸ªç”¨ä¾‹ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=o>#</span> <span class=n>lua</span> <span class=n>test.lua</span>
</span></span><span class=line><span class=cl><span class=n>Test1</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=n>Test2</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Test3</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=n>Test4</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Test5</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=n>Test6</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=o>#</span> <span class=n>luajit</span> <span class=n>test.lua</span>
</span></span><span class=line><span class=cl><span class=n>Test1</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=n>Test2</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Test3</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Test4</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Test5</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Test6</span> <span class=mi>1</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸è¦åœ¨ Lua çš„ table ä¸­ä½¿ç”¨ nil å€¼ï¼Œ<strong>å¦‚æœä¸€ä¸ªå…ƒç´ è¦åˆ é™¤ï¼Œç›´æ¥ removeï¼Œä¸è¦ç”¨ nil å»ä»£æ›¿</strong>ã€‚</p><a href=#table-concat-table--sep--i--j---><h2 id=table-concat-table--sep--i--j---><span class=hanchor arialabel=Anchor># </span><strong>table. Concat (table [, sep [, i [, j ] ] ])</strong></h2></a><p>å¯¹äºå…ƒç´ æ˜¯ string æˆ–è€… number ç±»å‹çš„è¡¨ tableï¼Œè¿”å› <code>table[i]..sep..table[i+1] Â·Â·Â· sep..table[j]</code> è¿æ¥æˆçš„å­—ç¬¦ä¸²ã€‚å¡«å……å­—ç¬¦ä¸² sep é»˜è®¤ä¸ºç©ºç™½å­—ç¬¦ä¸²ã€‚èµ·å§‹ç´¢å¼•ä½ç½® i é»˜è®¤ä¸º 1ï¼Œç»“æŸç´¢å¼•ä½ç½® j é»˜è®¤æ˜¯ table çš„é•¿åº¦ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>a</span> <span class=o>=</span> <span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=s2>&#34;hello&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>table.concat</span><span class=p>(</span><span class=n>a</span><span class=p>))</span>              <span class=c1>-- output: 135hello</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>table.concat</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=s2>&#34;|&#34;</span><span class=p>))</span>         <span class=c1>-- output: 1|3|5|hello</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>table.concat</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=s2>&#34; &#34;</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>   <span class=c1>-- output:</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>table.concat</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=s2>&#34; &#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>))</span>   <span class=c1>-- output: 3 5 hello</span>
</span></span></code></pre></td></tr></table></div></div><a href=#table-insert-table-pos--value><h2 id=table-insert-table-pos--value><span class=hanchor arialabel=Anchor># </span><strong>table. Insert (table, [pos ,] value)</strong></h2></a><p>åœ¨ï¼ˆæ•°ç»„å‹ï¼‰è¡¨ table çš„ pos ç´¢å¼•ä½ç½®æ’å…¥ valueï¼Œå…¶å®ƒå…ƒç´ å‘åç§»åŠ¨åˆ°ç©ºçš„åœ°æ–¹ã€‚Pos çš„é»˜è®¤å€¼æ˜¯è¡¨çš„é•¿åº¦åŠ ä¸€ï¼Œå³é»˜è®¤æ˜¯æ’åœ¨è¡¨çš„æœ€å</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>a</span> <span class=o>=</span> <span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>8</span><span class=p>}</span>             <span class=c1>--a[1] = 1,a[2] = 8</span>
</span></span><span class=line><span class=cl><span class=n>table.insert</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>   <span class=c1>--åœ¨è¡¨ç´¢å¼•ä¸º1å¤„æ’å…¥3</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>a</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>table.insert</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>    <span class=c1>--åœ¨è¡¨çš„æœ€åæ’å…¥10</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>a</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>3</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>4</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>    <span class=mi>1</span>    <span class=mi>8</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>    <span class=mi>1</span>    <span class=mi>8</span>    <span class=mi>10</span>
</span></span></code></pre></td></tr></table></div></div><a href=#table-maxn-table><h2 id=table-maxn-table><span class=hanchor arialabel=Anchor># </span><strong>table. Maxn (table)</strong></h2></a><p>è¿”å›ï¼ˆæ•°ç»„å‹ï¼‰è¡¨ table çš„æœ€å¤§ç´¢å¼•ç¼–å·ï¼›å¦‚æœæ­¤è¡¨æ²¡æœ‰æ­£çš„ç´¢å¼•ç¼–å·ï¼Œè¿”å› 0ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>a</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=n>a</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>table.maxn</span><span class=p>(</span><span class=n>a</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>a</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>table.maxn</span><span class=p>(</span><span class=n>a</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output05</span>
</span></span></code></pre></td></tr></table></div></div><a href=#table-remove-table--pos><h2 id=table-remove-table--pos><span class=hanchor arialabel=Anchor># </span><strong>table. Remove (table [, pos])</strong></h2></a><p>åœ¨è¡¨ table ä¸­åˆ é™¤ç´¢å¼•ä¸º posï¼ˆpos åªèƒ½æ˜¯ number å‹ï¼‰çš„å…ƒç´ ï¼Œå¹¶è¿”å›è¿™ä¸ªè¢«åˆ é™¤çš„å…ƒç´ ï¼Œå®ƒåé¢æ‰€æœ‰å…ƒç´ çš„ç´¢å¼•å€¼éƒ½ä¼šå‡ä¸€ã€‚Pos çš„é»˜è®¤å€¼æ˜¯è¡¨çš„é•¿åº¦ï¼Œå³é»˜è®¤æ˜¯åˆ é™¤è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=kd>local</span> <span class=n>a</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>table.remove</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span> <span class=c1>--åˆ é™¤é€Ÿç´¢å¼•ä¸º1çš„å…ƒç´ print(a[1], a[2], a[3], a[4])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>table.remove</span><span class=p>(</span><span class=n>a</span><span class=p>))</span>   <span class=c1>--åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ print(a[1], a[2], a[3], a[4])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output12    3    4    nil42    3    nil    nil</span>
</span></span></code></pre></td></tr></table></div></div><a href=#table-sort-table--comp><h2 id=table-sort-table--comp><span class=hanchor arialabel=Anchor># </span><strong>table. Sort (table [, comp])</strong></h2></a><p>æŒ‰ç…§ç»™å®šçš„æ¯”è¾ƒå‡½æ•° comp ç»™è¡¨ table æ’åºï¼Œä¹Ÿå°±æ˜¯ä» table[1] åˆ° table[n]ï¼Œè¿™é‡Œ n è¡¨ç¤º table çš„é•¿åº¦ã€‚æ¯”è¾ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚æœå¸Œæœ›ç¬¬ä¸€ä¸ªå‚æ•°æ’åœ¨ç¬¬äºŒä¸ªçš„å‰é¢ï¼Œå°±åº”è¯¥è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚å¦‚æœæ¯”è¾ƒå‡½æ•° comp æ²¡æœ‰ç»™å‡ºï¼Œé»˜è®¤ä»å°åˆ°å¤§æ’åºã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=kr>function</span> <span class=nf>compare</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=c1>--ä»å¤§åˆ°å°æ’åº</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=n>x</span> <span class=o>&gt;</span> <span class=n>y</span>         <span class=c1>--å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°å¤§äºç¬¬äºŒä¸ªå°±è¿”å›trueï¼Œå¦åˆ™è¿”å›false</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>a</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>25</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>table.sort</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>           <span class=c1>--é»˜è®¤ä»å°åˆ°å¤§æ’åº</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>a</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>3</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>4</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>5</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>table.sort</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>compare</span><span class=p>)</span> <span class=c1>--ä½¿ç”¨æ¯”è¾ƒå‡½æ•°è¿›è¡Œæ’åº</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>a</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>3</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>4</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=mi>5</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>--&gt;output</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>    <span class=mi>3</span>    <span class=mi>4</span>    <span class=mi>7</span>    <span class=mi>25</span>
</span></span><span class=line><span class=cl><span class=mi>25</span>    <span class=mi>7</span>    <span class=mi>4</span>    <span class=mi>3</span>    <span class=mi>1</span>
</span></span></code></pre></td></tr></table></div></div><a href=#å…¶ä»–><h2 id=å…¶ä»–><span class=hanchor arialabel=Anchor># </span>å…¶ä»–</h2></a><p>LuaJIT 2.1 æ–°å¢åŠ çš„ <code>table.new</code> å’Œ <code>table.clear</code> å‡½æ•°æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚å‰è€…ä¸»è¦ç”¨æ¥é¢„åˆ†é… Lua table ç©ºé—´ï¼Œåè€…ä¸»è¦ç”¨æ¥é«˜æ•ˆçš„é‡Šæ”¾ table ç©ºé—´ï¼Œå¹¶ä¸”å®ƒä»¬éƒ½æ˜¯å¯ä»¥è¢« JIT ç¼–è¯‘çš„</p><a href=#æ—¥æœŸæ—¶é—´><h1 id=æ—¥æœŸæ—¶é—´><span class=hanchor arialabel=Anchor># </span>æ—¥æœŸæ—¶é—´</h1></a><p>å‡½æ•° timeã€date å’Œ difftime æä¾›äº†æ‰€æœ‰çš„æ—¥æœŸå’Œæ—¶é—´åŠŸèƒ½ã€‚</p><p>åœ¨ OpenResty çš„ä¸–ç•Œé‡Œï¼Œä¸æ¨èä½¿ç”¨è¿™é‡Œçš„æ ‡å‡†æ—¶é—´å‡½æ•°ï¼Œå› ä¸ºè¿™äº›å‡½æ•°é€šå¸¸ä¼šå¼•å‘ä¸æ­¢ä¸€ä¸ªæ˜‚è´µçš„ç³»ç»Ÿè°ƒç”¨ï¼ŒåŒæ—¶æ— æ³•ä¸º LuaJIT JIT ç¼–è¯‘ï¼Œå¯¹æ€§èƒ½é€ æˆè¾ƒå¤§å½±å“ã€‚æ¨èä½¿ç”¨ ngx_lua æ¨¡å—æä¾›çš„å¸¦ç¼“å­˜çš„æ—¶é—´æ¥å£ï¼Œå¦‚ <code>ngx.today</code>, <code>ngx.time</code>, <code>ngx.utctime</code>, <code>ngx.localtime</code>, <code>ngx.now</code>, <code>ngx.http_time</code>ï¼Œä»¥åŠ <code>ngx.cookie_time</code> ç­‰ã€‚</p><a href=#os-time-table><h2 id=os-time-table><span class=hanchor arialabel=Anchor># </span><strong>os. Time ([table])</strong></h2></a><p>å¦‚æœä¸ä½¿ç”¨å‚æ•° table è°ƒç”¨ time å‡½æ•°ï¼Œ</p><ul><li><p>å®ƒä¼šè¿”å›å½“å‰çš„æ—¶é—´å’Œæ—¥æœŸï¼ˆå®ƒè¡¨ç¤ºä»æŸä¸€æ—¶åˆ»åˆ°ç°åœ¨çš„ç§’æ•°ï¼‰ã€‚</p></li><li><p>å¦‚æœç”¨ table å‚æ•°ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºè¯¥ table ä¸­æ‰€æè¿°çš„æ—¥æœŸå’Œæ—¶é—´ï¼ˆå®ƒè¡¨ç¤ºä»æŸä¸€æ—¶åˆ»åˆ° table ä¸­æè¿°æ—¥æœŸå’Œæ—¶é—´çš„ç§’æ•°ï¼‰ã€‚Table çš„å­—æ®µå¦‚ä¸‹ï¼š</p></li></ul><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>å­—æ®µåç§°</td><td>å–å€¼èŒƒå›´</td></tr><tr><td>year</td><td>å››ä½æ•°å­—</td></tr><tr><td>month</td><td>1&ndash;12</td></tr><tr><td>day</td><td>1&ndash;31</td></tr><tr><td>hour</td><td>0&ndash;23</td></tr><tr><td>min</td><td>0&ndash;59</td></tr><tr><td>sec</td><td>0&ndash;61</td></tr><tr><td>isdst</td><td>booleanï¼ˆtrue è¡¨ç¤ºå¤ä»¤æ—¶ï¼‰</td></tr></tbody></table><p>å¯¹äº time å‡½æ•°ï¼Œå¦‚æœå‚æ•°ä¸º tableï¼Œé‚£ä¹ˆ table ä¸­å¿…é¡»å«æœ‰ yearã€monthã€day å­—æ®µã€‚å…¶ä»–å­—ç¼ºçœæ—¶æ®µé»˜è®¤ä¸ºä¸­åˆï¼ˆ12:00:00ï¼‰ã€‚</p><blockquote><p>ç¤ºä¾‹ä»£ç ï¼šï¼ˆåœ°ç‚¹ä¸ºåŒ—äº¬ï¼‰</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>print(os.time())    --&gt;output  1438243393
</span></span><span class=line><span class=cl>a = { year = 1970, month = 1, day = 1, hour = 8, min = 1 }
</span></span><span class=line><span class=cl>print(os.time(a))   --&gt;output  60
</span></span></code></pre></td></tr></table></div></div><a href=#os-difftime-t-2-t-1><h2 id=os-difftime-t-2-t-1><span class=hanchor arialabel=Anchor># </span><strong>os. Difftime (t 2, t 1)</strong></h2></a><p>è¿”å› t 1 åˆ° t 2 çš„æ—¶é—´å·®ï¼Œå•ä½ä¸ºç§’ã€‚</p><blockquote><p>ç¤ºä¾‹ä»£ç :</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>local day1 = { year = 2015, month = 7, day = 30 }
</span></span><span class=line><span class=cl>local t1 = os.time(day1)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>local day2 = { year = 2015, month = 7, day = 31 }
</span></span><span class=line><span class=cl>local t2 = os.time(day2)
</span></span><span class=line><span class=cl>print(os.difftime(t2, t1))   --&gt;output  86400
</span></span></code></pre></td></tr></table></div></div><a href=#os-date-format--time><h2 id=os-date-format--time><span class=hanchor arialabel=Anchor># </span><strong>os. Date ([format [, time]])</strong></h2></a><p>æŠŠä¸€ä¸ªè¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´çš„æ•°å€¼ï¼Œè½¬æ¢æˆæ›´é«˜çº§çš„è¡¨ç°å½¢å¼ã€‚</p><ul><li><p>å…¶ç¬¬ä¸€ä¸ªå‚æ•° format æ˜¯ä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œæè¿°äº†è¦è¿”å›çš„æ—¶é—´å½¢å¼ã€‚</p></li><li><p>ç¬¬äºŒä¸ªå‚æ•° time å°±æ˜¯æ—¥æœŸå’Œæ—¶é—´çš„æ•°å­—è¡¨ç¤ºï¼Œç¼ºçœæ—¶é»˜è®¤ä¸ºå½“å‰çš„æ—¶é—´ã€‚</p></li><li><p>ä½¿ç”¨æ ¼å¼å­—ç¬¦ &ldquo;*t&rdquo;ï¼Œåˆ›å»ºä¸€ä¸ªæ—¶é—´è¡¨ã€‚</p></li></ul><blockquote><p>ç¤ºä¾‹ä»£ç ï¼š</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>local tab1 = os.date(&#34;*t&#34;)  --è¿”å›ä¸€ä¸ªæè¿°å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„è¡¨
</span></span><span class=line><span class=cl>local ans1 = &#34;{&#34;
</span></span><span class=line><span class=cl>for k, v in pairs(tab1) do  --æŠŠtab1è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²
</span></span><span class=line><span class=cl>    ans1 = string.format(&#34;%s %s = %s,&#34;, ans1, k, tostring(v))
</span></span><span class=line><span class=cl>end
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ans1 = ans1 .. &#34;}&#34;
</span></span><span class=line><span class=cl>print(&#34;tab1 = &#34;, ans1)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>local tab2 = os.date(&#34;*t&#34;, 360)  --è¿”å›ä¸€ä¸ªæè¿°æ—¥æœŸå’Œæ—¶é—´æ•°ä¸º360ç§’çš„è¡¨
</span></span><span class=line><span class=cl>local ans2 = &#34;{&#34;
</span></span><span class=line><span class=cl>for k, v in pairs(tab2) do      --æŠŠtab2è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²
</span></span><span class=line><span class=cl>    ans2 = string.format(&#34;%s %s = %s,&#34;, ans2, k, tostring(v))
</span></span><span class=line><span class=cl>end
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ans2 = ans2 .. &#34;}&#34;
</span></span><span class=line><span class=cl>print(&#34;tab2 = &#34;, ans2)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--&gt;output
</span></span><span class=line><span class=cl>tab1 = { hour = 17, min = 28, wday = 5, day = 30, month = 7, year = 2015, sec = 10, yday = 211, isdst = false,}
</span></span><span class=line><span class=cl>tab2 = { hour = 8, min = 6, wday = 5, day = 1, month = 1, year = 1970, sec = 0, yday = 1, isdst = false,}
</span></span></code></pre></td></tr></table></div></div><p>è¯¥è¡¨ä¸­é™¤äº†ä½¿ç”¨åˆ°äº† time å‡½æ•°å‚æ•° table çš„å­—æ®µå¤–ï¼Œè¿™è¿˜æä¾›äº†æ˜ŸæœŸï¼ˆwdayï¼Œæ˜ŸæœŸå¤©ä¸º 1ï¼‰å’Œä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼ˆydayï¼Œä¸€æœˆä¸€æ—¥ä¸º 1ï¼‰ã€‚é™¤äº†ä½¿ç”¨ &ldquo;*t&rdquo; æ ¼å¼å­—ç¬¦ä¸²å¤–ï¼Œå¦‚æœä½¿ç”¨å¸¦æ ‡è®°ï¼ˆè§ä¸‹è¡¨ï¼‰çš„ç‰¹æ®Šå­—ç¬¦ä¸²ï¼Œos. Date å‡½æ•°ä¼šå°†ç›¸åº”çš„æ ‡è®°ä½ä»¥æ—¶é—´ä¿¡æ¯è¿›è¡Œå¡«å……ï¼Œå¾—åˆ°ä¸€ä¸ªåŒ…å«æ—¶é—´çš„å­—ç¬¦ä¸²ã€‚è¡¨å¦‚ä¸‹ï¼š</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>æ ¼å¼å­—ç¬¦</td><td>å«ä¹‰</td></tr><tr><td>%a</td><td>ä¸€æ˜ŸæœŸä¸­å¤©æ•°çš„ç®€å†™ï¼ˆä¾‹å¦‚ï¼šWedï¼‰</td></tr><tr><td>%A</td><td>ä¸€æ˜ŸæœŸä¸­å¤©æ•°çš„å…¨ç§°ï¼ˆä¾‹å¦‚ï¼šWednesdayï¼‰</td></tr><tr><td>%b</td><td>æœˆä»½çš„ç®€å†™ï¼ˆä¾‹å¦‚ï¼šSepï¼‰</td></tr><tr><td>%B</td><td>æœˆä»½çš„å…¨ç§°ï¼ˆä¾‹å¦‚ï¼šSeptemberï¼‰</td></tr><tr><td>%c</td><td>æ—¥æœŸå’Œæ—¶é—´ï¼ˆä¾‹å¦‚ï¼š07/30/15 16:57:24ï¼‰</td></tr><tr><td>%d</td><td>ä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤©[01 ~ 31]</td></tr><tr><td>%H</td><td>24 å°æ—¶åˆ¶ä¸­çš„å°æ—¶æ•°[00 ~ 23]</td></tr><tr><td>%I</td><td>12 å°æ—¶åˆ¶ä¸­çš„å°æ—¶æ•°[01 ~ 12]</td></tr><tr><td>%j</td><td>ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©[001 ~ 366]</td></tr><tr><td>%M</td><td>åˆ†é’Ÿæ•°[00 ~ 59]</td></tr><tr><td>%m</td><td>æœˆä»½æ•°[01 ~ 12]</td></tr><tr><td>%p</td><td>â€œä¸Šåˆï¼ˆamï¼‰â€æˆ–â€œä¸‹åˆï¼ˆpmï¼‰â€</td></tr><tr><td>%S</td><td>ç§’æ•°[00 ~ 59]</td></tr><tr><td>%w</td><td>ä¸€æ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©[1 ~ 7 = æ˜ŸæœŸå¤© ~ æ˜ŸæœŸå…­]</td></tr><tr><td>%x</td><td>æ—¥æœŸï¼ˆä¾‹å¦‚ï¼š07/30/15ï¼‰</td></tr><tr><td>%X</td><td>æ—¶é—´ï¼ˆä¾‹å¦‚ï¼š16:57:24ï¼‰</td></tr><tr><td>%y</td><td>ä¸¤ä½æ•°çš„å¹´ä»½[00 ~ 99]</td></tr><tr><td>%Y</td><td>å®Œæ•´çš„å¹´ä»½ï¼ˆä¾‹å¦‚ï¼š2015ï¼‰</td></tr><tr><td>%%</td><td>å­—ç¬¦&rsquo;%&rsquo;</td></tr></tbody></table><blockquote><p>ç¤ºä¾‹ä»£ç ï¼š</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>print(os.date(&#34;today is %A, in %B&#34;))
</span></span><span class=line><span class=cl>print(os.date(&#34;now is %x %X&#34;))
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--&gt;output
</span></span><span class=line><span class=cl>today is Thursday, in July
</span></span><span class=line><span class=cl>now is 07/30/15 17:39:22
</span></span></code></pre></td></tr></table></div></div><a href=#æ•°å­¦åº“><h1 id=æ•°å­¦åº“><span class=hanchor arialabel=Anchor># </span>æ•°å­¦åº“</h1></a><p>Ua æ•°å­¦åº“ç”±ä¸€ç»„æ ‡å‡†çš„æ•°å­¦å‡½æ•°æ„æˆã€‚æ•°å­¦åº“çš„å¼•å…¥ä¸°å¯Œäº† Lua ç¼–ç¨‹è¯­è¨€çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿äº†ç¨‹åºçš„ç¼–å†™ã€‚å¸¸ç”¨æ•°å­¦å‡½æ•°è§ä¸‹è¡¨ï¼š</p><table><thead><tr><th>asd</th><th>sdfa</th></tr></thead><tbody><tr><td>å‡½æ•°å</td><td>å‡½æ•°åŠŸèƒ½</td></tr><tr><td>math.Rad (x)</td><td>è§’åº¦ x è½¬æ¢æˆå¼§åº¦</td></tr><tr><td>math.Deg (x)</td><td>å¼§åº¦ x è½¬æ¢æˆè§’åº¦</td></tr><tr><td>math.Max (x, &mldr;)</td><td>è¿”å›å‚æ•°ä¸­å€¼æœ€å¤§çš„é‚£ä¸ªæ•°ï¼Œå‚æ•°å¿…é¡»æ˜¯ number å‹</td></tr><tr><td>math.Min (x, &mldr;)</td><td>è¿”å›å‚æ•°ä¸­å€¼æœ€å°çš„é‚£ä¸ªæ•°ï¼Œå‚æ•°å¿…é¡»æ˜¯ number å‹</td></tr><tr><td>math. Random ([m [, n]])</td><td>ä¸ä¼ å…¥å‚æ•°æ—¶ï¼Œè¿”å›ä¸€ä¸ªåœ¨åŒºé—´[0,1)å†…å‡åŒ€åˆ†å¸ƒçš„ä¼ªéšæœºå®æ•°ï¼›åªä½¿ç”¨ä¸€ä¸ªæ•´æ•°å‚æ•° m æ—¶ï¼Œè¿”å›ä¸€ä¸ªåœ¨åŒºé—´[1, m]å†…å‡åŒ€åˆ†å¸ƒçš„ä¼ªéšæœºæ•´æ•°ï¼›ä½¿ç”¨ä¸¤ä¸ªæ•´æ•°å‚æ•°æ—¶ï¼Œè¿”å›ä¸€ä¸ªåœ¨åŒºé—´[m, n]å†…å‡åŒ€åˆ†å¸ƒçš„ä¼ªéšæœºæ•´æ•°</td></tr><tr><td>math. Randomseed (x)</td><td>ä¸ºä¼ªéšæœºæ•°ç”Ÿæˆå™¨è®¾ç½®ä¸€ä¸ªç§å­ xï¼Œç›¸åŒçš„ç§å­å°†ä¼šç”Ÿæˆç›¸åŒçš„æ•°å­—åºåˆ—</td></tr><tr><td>math.Abs (x)</td><td>è¿”å› x çš„ç»å¯¹å€¼</td></tr><tr><td>math.Fmod (x, y)</td><td>è¿”å› x å¯¹ y å–ä½™æ•°</td></tr><tr><td>math.Pow (x, y)</td><td>è¿”å› x çš„ y æ¬¡æ–¹</td></tr><tr><td>math.Sqrt (x)</td><td>è¿”å› x çš„ç®—æœ¯å¹³æ–¹æ ¹</td></tr><tr><td>math.Exp (x)</td><td>è¿”å›è‡ªç„¶æ•° e çš„ x æ¬¡æ–¹</td></tr><tr><td>math.Log (x)</td><td>è¿”å› x çš„è‡ªç„¶å¯¹æ•°</td></tr><tr><td>math. Log 10 (x)</td><td>è¿”å›ä»¥ 10 ä¸ºåº•ï¼Œx çš„å¯¹æ•°</td></tr><tr><td>math.Floor (x)</td><td>è¿”å›æœ€å¤§ä¸”ä¸å¤§äº x çš„æ•´æ•°</td></tr><tr><td>math.Ceil (x)</td><td>è¿”å›æœ€å°ä¸”ä¸å°äº x çš„æ•´æ•°</td></tr><tr><td>math. Pi</td><td>åœ†å‘¨ç‡</td></tr><tr><td>math.Sin (x)</td><td>æ±‚å¼§åº¦ x çš„æ­£å¼¦å€¼</td></tr><tr><td>math.Cos (x)</td><td>æ±‚å¼§åº¦ x çš„ä½™å¼¦å€¼</td></tr><tr><td>math.Tan (x)</td><td>æ±‚å¼§åº¦ x çš„æ­£åˆ‡å€¼</td></tr><tr><td>math.Asin (x)</td><td>æ±‚ x çš„åæ­£å¼¦å€¼</td></tr><tr><td>math.Acos (x)</td><td>æ±‚ x çš„åä½™å¼¦å€¼</td></tr><tr><td>math.Atan (x)</td><td>æ±‚ x çš„åæ­£åˆ‡å€¼</td></tr></tbody></table><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.pi</span><span class=p>)</span>           <span class=c1>--&gt;output  3.1415926535898</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.rad</span><span class=p>(</span><span class=mi>180</span><span class=p>))</span>     <span class=c1>--&gt;output  3.1415926535898</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.deg</span><span class=p>(</span><span class=n>math.pi</span><span class=p>))</span> <span class=c1>--&gt;output  180</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.sin</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>       <span class=c1>--&gt;output  0.8414709848079</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.cos</span><span class=p>(</span><span class=n>math.pi</span><span class=p>))</span> <span class=c1>--&gt;output  -1</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.tan</span><span class=p>(</span><span class=n>math.pi</span> <span class=o>/</span> <span class=mi>4</span><span class=p>))</span>  <span class=c1>--&gt;output  1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.atan</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>      <span class=c1>--&gt;output  0.78539816339745</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.asin</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>      <span class=c1>--&gt;output  0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.max</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>3.6</span><span class=p>,</span> <span class=mf>9.1</span><span class=p>))</span>     <span class=c1>--&gt;output  9.1</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.min</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>3.6</span><span class=p>,</span> <span class=mf>9.1</span><span class=p>))</span>     <span class=c1>--&gt;output  -1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.fmod</span><span class=p>(</span><span class=mf>10.1</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>   <span class=c1>--&gt;output  1.1</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.sqrt</span><span class=p>(</span><span class=mi>360</span><span class=p>))</span>      <span class=c1>--&gt;output  18.97366596101</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.exp</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>         <span class=c1>--&gt;output  2.718281828459</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.log</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>        <span class=c1>--&gt;output  2.302585092994</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.log10</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>      <span class=c1>--&gt;output  1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.floor</span><span class=p>(</span><span class=mf>3.1415</span><span class=p>))</span>  <span class=c1>--&gt;output  3</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.ceil</span><span class=p>(</span><span class=mf>7.998</span><span class=p>))</span>    <span class=c1>--&gt;output  8</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨ <code>math.random()</code> å‡½æ•°è·å¾—ä¼ªéšæœºæ•°æ—¶ï¼Œå¦‚æœä¸ä½¿ç”¨ <code>math.randomseed()</code> è®¾ç½®ä¼ªéšæœºæ•°ç”Ÿæˆç§å­æˆ–è€…è®¾ç½®ç›¸åŒçš„ä¼ªéšæœºæ•°ç”Ÿæˆç§å­ï¼Œé‚£ä¹ˆå¾—å¾—åˆ°çš„ä¼ªéšæœºæ•°åºåˆ—æ˜¯ä¸€æ ·çš„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>math.randomseed</span> <span class=p>(</span><span class=mi>100</span><span class=p>)</span> <span class=c1>--æŠŠç§å­è®¾ç½®ä¸º100</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.random</span><span class=p>())</span>         <span class=c1>--&gt;output  0.0012512588885159</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.random</span><span class=p>(</span><span class=mi>100</span><span class=p>))</span>      <span class=c1>--&gt;output  57</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.random</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>360</span><span class=p>))</span> <span class=c1>--&gt;output  150</span>
</span></span></code></pre></td></tr></table></div></div><p>ç¨ç­‰ç‰‡åˆ»ï¼Œå†æ¬¡è¿è¡Œä¸Šé¢çš„ä»£ç ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>math.randomseed</span> <span class=p>(</span><span class=mi>100</span><span class=p>)</span> <span class=c1>--æŠŠç§å­è®¾ç½®ä¸º100</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.random</span><span class=p>())</span>         <span class=c1>--&gt;output  0.0012512588885159</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.random</span><span class=p>(</span><span class=mi>100</span><span class=p>))</span>      <span class=c1>--&gt;output  57</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.random</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>360</span><span class=p>))</span> <span class=c1>--&gt;output  150</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸¤æ¬¡è¿è¡Œçš„ç»“æœä¸€æ ·ã€‚ä¸ºäº†é¿å…æ¯æ¬¡ç¨‹åºå¯åŠ¨æ—¶å¾—åˆ°çš„éƒ½æ˜¯ç›¸åŒçš„ä¼ªéšæœºæ•°åºåˆ—ï¼Œé€šå¸¸æ˜¯ä½¿ç”¨å½“å‰æ—¶é—´ä½œä¸ºç§å­ã€‚</p><blockquote><p>ä¿®æ”¹ä¸Šä¾‹ä¸­çš„ä»£ç ï¼š</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Lua data-lang=Lua><span class=line><span class=cl><span class=n>math.randomseed</span> <span class=p>(</span><span class=n>os.time</span><span class=p>())</span>   <span class=c1>--æŠŠ100æ¢æˆos.time()</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.random</span><span class=p>())</span>          <span class=c1>--&gt;output 0.88369396038697</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.random</span><span class=p>(</span><span class=mi>100</span><span class=p>))</span>       <span class=c1>--&gt;output 66</span>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>math.random</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>360</span><span class=p>))</span>  <span class=c1>--&gt;output 228</span>
</span></span></code></pre></td></tr></table></div></div><p>ç¨ç­‰ç‰‡åˆ»ï¼Œå†æ¬¡è¿è¡Œä¸Šé¢çš„ä»£ç ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>math.randomseed (os.time())   --æŠŠ100æ¢æˆos.time()
</span></span><span class=line><span class=cl>print(math.random())          --&gt;output 0.88946195867794
</span></span><span class=line><span class=cl>print(math.random(100))       --&gt;output 68
</span></span><span class=line><span class=cl>print(math.random(100, 360))  --&gt;output 129
</span></span></code></pre></td></tr></table></div></div><a href=#æ–‡ä»¶><h1 id=æ–‡ä»¶><span class=hanchor arialabel=Anchor># </span>æ–‡ä»¶</h1></a><p>Lua I/O åº“æä¾›ä¸¤ç§ä¸åŒçš„æ–¹å¼å¤„ç†æ–‡ä»¶ï¼šéšå¼æ–‡ä»¶æè¿°ï¼Œæ˜¾å¼æ–‡ä»¶æè¿°ã€‚</p><p>è¿™äº›æ–‡ä»¶ I/O æ“ä½œï¼Œ<strong>åœ¨ OpenResty çš„ä¸Šä¸‹æ–‡ä¸­å¯¹äº‹ä»¶å¾ªç¯æ˜¯ä¼šäº§ç”Ÿé˜»å¡æ•ˆåº”</strong>ã€‚OpenResty æ¯”è¾ƒæ“…é•¿çš„æ˜¯é«˜å¹¶å‘ç½‘ç»œå¤„ç†ï¼Œåœ¨è¿™ä¸ªç¯å¢ƒä¸­ï¼Œä»»ä½•æ–‡ä»¶çš„æ“ä½œï¼Œéƒ½å°†é˜»å¡å…¶ä»–å¹¶è¡Œæ‰§è¡Œçš„è¯·æ±‚ã€‚<strong>å®é™…ä¸­çš„åº”ç”¨ï¼Œåœ¨ OpenResty é¡¹ç›®ä¸­åº”å°½å¯èƒ½è®©ç½‘ç»œå¤„ç†éƒ¨åˆ†ã€æ–‡ä»¶ I/0 æ“ä½œéƒ¨åˆ†ç›¸äº’ç‹¬ç«‹ï¼Œä¸è¦æ‰å’Œåœ¨ä¸€èµ·</strong>ã€‚</p><a href=#éšå¼æ–‡ä»¶æè¿°><h2 id=éšå¼æ–‡ä»¶æè¿°><span class=hanchor arialabel=Anchor># </span><strong>éšå¼æ–‡ä»¶æè¿°</strong></h2></a><p>è®¾ç½®ä¸€ä¸ªé»˜è®¤çš„è¾“å…¥æˆ–è¾“å‡ºæ–‡ä»¶ï¼Œç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶ä¸Šè¿›è¡Œæ‰€æœ‰çš„è¾“å…¥æˆ–è¾“å‡ºæ“ä½œã€‚æ‰€æœ‰çš„æ“ä½œå‡½æ•°ç”± io è¡¨æä¾›ã€‚</p><blockquote><p>æ‰“å¼€å·²ç»å­˜åœ¨çš„ <code>test1.txt</code> æ–‡ä»¶ï¼Œå¹¶è¯»å–é‡Œé¢çš„å†…å®¹</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>file = io.input(&#34;test1.txt&#34;)    -- ä½¿ç”¨ io.input() å‡½æ•°æ‰“å¼€æ–‡ä»¶repeat
</span></span><span class=line><span class=cl>    line = io.read()            -- é€è¡Œè¯»å–å†…å®¹ï¼Œæ–‡ä»¶ç»“æŸæ—¶è¿”å›nil
</span></span><span class=line><span class=cl>    if nil == line then
</span></span><span class=line><span class=cl>        break
</span></span><span class=line><span class=cl>    end
</span></span><span class=line><span class=cl>    print(line)
</span></span><span class=line><span class=cl>until (false)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>io.close(file)                  -- å…³é—­æ–‡ä»¶--&gt; output
</span></span><span class=line><span class=cl>my test file
</span></span><span class=line><span class=cl>hello
</span></span><span class=line><span class=cl>lua
</span></span></code></pre></td></tr></table></div></div><blockquote><p>åœ¨ <code>test1.txt</code> æ–‡ä»¶çš„æœ€åæ·»åŠ ä¸€è¡Œ &ldquo;hello world&rdquo;</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>file = io.open(&#34;test1.txt&#34;, &#34;a+&#34;)   -- ä½¿ç”¨ io.open() å‡½æ•°ï¼Œä»¥æ·»åŠ æ¨¡å¼æ‰“å¼€æ–‡ä»¶
</span></span><span class=line><span class=cl>io.output(file)                     -- ä½¿ç”¨ io.output() å‡½æ•°ï¼Œè®¾ç½®é»˜è®¤è¾“å‡ºæ–‡ä»¶
</span></span><span class=line><span class=cl>io.write(&#34;\nhello world&#34;)           -- ä½¿ç”¨ io.write() å‡½æ•°ï¼ŒæŠŠå†…å®¹å†™åˆ°æ–‡ä»¶
</span></span><span class=line><span class=cl>io.close(file)
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ç›¸åº”ç›®å½•ä¸‹æ‰“å¼€ <code>test1.txt</code> æ–‡ä»¶ï¼ŒæŸ¥çœ‹æ–‡ä»¶å†…å®¹å‘ç”Ÿçš„å˜åŒ–ã€‚</p><a href=#æ˜¾å¼æ–‡ä»¶æè¿°><h2 id=æ˜¾å¼æ–‡ä»¶æè¿°><span class=hanchor arialabel=Anchor># </span><strong>æ˜¾å¼æ–‡ä»¶æè¿°</strong></h2></a><p>ä½¿ç”¨ file: XXX () å‡½æ•°æ–¹å¼è¿›è¡Œæ“ä½œ, å…¶ä¸­ file ä¸º io.Open () è¿”å›çš„æ–‡ä»¶å¥æŸ„ã€‚</p><blockquote><p>æ‰“å¼€å·²ç»å­˜åœ¨çš„ test 2. Txt æ–‡ä»¶ï¼Œå¹¶è¯»å–é‡Œé¢çš„å†…å®¹</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>file = io.open(&#34;test2.txt&#34;, &#34;r&#34;)    -- ä½¿ç”¨ io.open() å‡½æ•°ï¼Œä»¥åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>for line in file:lines() do         -- ä½¿ç”¨ file:lines() å‡½æ•°é€è¡Œè¯»å–æ–‡ä»¶
</span></span><span class=line><span class=cl>    print(line)
</span></span><span class=line><span class=cl>end
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>file:close()
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--&gt;output
</span></span><span class=line><span class=cl>my test2
</span></span><span class=line><span class=cl>hello lua
</span></span></code></pre></td></tr></table></div></div><blockquote><p>åœ¨ test 2. Txt æ–‡ä»¶çš„æœ€åæ·»åŠ ä¸€è¡Œ &ldquo;hello world&rdquo;</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=line><span class=cl>file = io.open(&#34;test2.txt&#34;, &#34;a&#34;)  -- ä½¿ç”¨ io.open() å‡½æ•°ï¼Œä»¥æ·»åŠ æ¨¡å¼æ‰“å¼€æ–‡ä»¶
</span></span><span class=line><span class=cl>file:write(&#34;\nhello world&#34;)       -- ä½¿ç”¨ file:write() å‡½æ•°ï¼Œåœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ å†…å®¹
</span></span><span class=line><span class=cl>file:close()
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ç›¸åº”ç›®å½•ä¸‹æ‰“å¼€ <code>test2.txt</code> æ–‡ä»¶ï¼ŒæŸ¥çœ‹æ–‡ä»¶å†…å®¹å‘ç”Ÿçš„å˜åŒ–ã€‚</p><a href=#æ–‡ä»¶æ“ä½œå‡½æ•°><h2 id=æ–‡ä»¶æ“ä½œå‡½æ•°><span class=hanchor arialabel=Anchor># </span><strong>æ–‡ä»¶æ“ä½œå‡½æ•°</strong></h2></a><a href=#io-open-filename--mode><h4 id=io-open-filename--mode><span class=hanchor arialabel=Anchor># </span><strong>io. Open (filename [, mode])</strong></h4></a><p>æŒ‰æŒ‡å®šçš„æ¨¡å¼ modeï¼Œæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åä¸º <code>filename</code> çš„æ–‡ä»¶ï¼ŒæˆåŠŸåˆ™è¿”å›æ–‡ä»¶å¥æŸ„ï¼Œå¤±è´¥åˆ™è¿”å› nil åŠ é”™è¯¯ä¿¡æ¯ã€‚æ¨¡å¼ï¼š</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>æ¨¡å¼</td><td>å«ä¹‰</td><td>æ–‡ä»¶ä¸å­˜åœ¨æ—¶</td></tr><tr><td>&ldquo;r&rdquo;</td><td>è¯»æ¨¡å¼ (é»˜è®¤)</td><td>è¿”å› nil åŠ é”™è¯¯ä¿¡æ¯</td></tr><tr><td>&ldquo;w&rdquo;</td><td>å†™æ¨¡å¼</td><td>åˆ›å»ºæ–‡ä»¶</td></tr><tr><td>&ldquo;a&rdquo;</td><td>æ·»åŠ æ¨¡å¼</td><td>åˆ›å»ºæ–‡ä»¶</td></tr><tr><td>&ldquo;r+&rdquo;</td><td>æ›´æ–°æ¨¡å¼ï¼Œä¿å­˜ä¹‹å‰çš„æ•°æ®</td><td>è¿”å› nil åŠ é”™è¯¯ä¿¡æ¯</td></tr><tr><td>&ldquo;w+&rdquo;</td><td>æ›´æ–°æ¨¡å¼ï¼Œæ¸…é™¤ä¹‹å‰çš„æ•°æ®</td><td>åˆ›å»ºæ–‡ä»¶</td></tr><tr><td>&ldquo;a+&rdquo;</td><td>æ·»åŠ æ›´æ–°æ¨¡å¼ï¼Œä¿å­˜ä¹‹å‰çš„æ•°æ®, åœ¨æ–‡ä»¶å°¾è¿›è¡Œæ·»åŠ </td><td>åˆ›å»ºæ–‡ä»¶</td></tr></tbody></table><p>æ¨¡å¼å­—ç¬¦ä¸²åé¢å¯ä»¥æœ‰ä¸€ä¸ª &lsquo;b&rsquo;ï¼Œç”¨äºåœ¨æŸäº›ç³»ç»Ÿä¸­æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p>æ³¨æ„ &ldquo;w&rdquo; å’Œ &ldquo;wb&rdquo; çš„åŒºåˆ«</p><ul><li><p>&ldquo;w&rdquo; è¡¨ç¤ºæ–‡æœ¬æ–‡ä»¶ã€‚æŸäº›æ–‡ä»¶ç³»ç»Ÿ (å¦‚ Linux çš„æ–‡ä»¶ç³»ç»Ÿ)è®¤ä¸º 0 x 0 A ä¸ºæ–‡æœ¬æ–‡ä»¶çš„æ¢è¡Œç¬¦ï¼ŒWindows çš„æ–‡ä»¶ç³»ç»Ÿè®¤ä¸º 0 x 0 D 0 A ä¸ºæ–‡æœ¬æ–‡ä»¶çš„æ¢è¡Œç¬¦ã€‚ä¸ºäº†å…¼å®¹å…¶ä»–æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ä» Linux æ‹·è´æ¥çš„æ–‡ä»¶ï¼‰ï¼ŒWindows çš„æ–‡ä»¶ç³»ç»Ÿåœ¨å†™æ–‡ä»¶æ—¶ï¼Œä¼šåœ¨æ–‡ä»¶ä¸­ 0 x 0 A çš„å‰é¢åŠ ä¸Š 0 x 0 Dã€‚ä½¿ç”¨ &ldquo;w&rdquo;ï¼Œå…¶å±æ€§è¦çœ‹æ‰€åœ¨çš„å¹³å°ã€‚</p></li><li><p>&ldquo;wb&rdquo; è¡¨ç¤ºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚æ–‡ä»¶ç³»ç»Ÿä¼šæŒ‰çº¯ç²¹çš„äºŒè¿›åˆ¶æ ¼å¼è¿›è¡Œå†™æ“ä½œï¼Œå› æ­¤ä¹Ÿå°±ä¸å­˜åœ¨æ ¼å¼è½¬æ¢çš„é—®é¢˜ã€‚ï¼ˆLinux æ–‡ä»¶ç³»ç»Ÿä¸‹ &ldquo;w&rdquo; å’Œ &ldquo;wb&rdquo; æ²¡æœ‰åŒºåˆ«ï¼‰</p></li></ul><a href=#file-close-><h4 id=file-close-><span class=hanchor arialabel=Anchor># </span><strong>file: close ()</strong></h4></a><p>å…³é—­æ–‡ä»¶ã€‚æ³¨æ„ï¼šå½“æ–‡ä»¶å¥æŸ„è¢«åƒåœ¾æ”¶é›†åï¼Œæ–‡ä»¶å°†è‡ªåŠ¨å…³é—­ã€‚å¥æŸ„å°†å˜ä¸ºä¸€ä¸ªä¸å¯é¢„çŸ¥çš„å€¼ã€‚</p><a href=#io-close-file><h4 id=io-close-file><span class=hanchor arialabel=Anchor># </span><strong>io. Close ([file])</strong></h4></a><p>å…³é—­æ–‡ä»¶ï¼Œå’Œ file: close () çš„ä½œç”¨ç›¸åŒã€‚æ²¡æœ‰å‚æ•° file æ—¶ï¼Œå…³é—­é»˜è®¤è¾“å‡ºæ–‡ä»¶ã€‚</p><a href=#file-flush-><h4 id=file-flush-><span class=hanchor arialabel=Anchor># </span><strong>file: flush ()</strong></h4></a><p>æŠŠå†™å…¥ç¼“å†²åŒºçš„æ‰€æœ‰æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ file ä¸­ã€‚</p><a href=#io-flush-><h4 id=io-flush-><span class=hanchor arialabel=Anchor># </span><strong>io. Flush ()</strong></h4></a><p>ç›¸å½“äº file: flush ()ï¼ŒæŠŠå†™å…¥ç¼“å†²åŒºçš„æ‰€æœ‰æ•°æ®å†™å…¥åˆ°é»˜è®¤è¾“å‡ºæ–‡ä»¶ã€‚</p><a href=#io-input-file><h4 id=io-input-file><span class=hanchor arialabel=Anchor># </span><strong>io. Input ([file])</strong></h4></a><p>å½“ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶åè°ƒç”¨æ—¶ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼ˆä»¥æ–‡æœ¬æ¨¡å¼ï¼‰ï¼Œå¹¶è®¾ç½®æ–‡ä»¶å¥æŸ„ä¸ºé»˜è®¤è¾“å…¥æ–‡ä»¶ï¼›å½“ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶å¥æŸ„è°ƒç”¨æ—¶ï¼Œè®¾ç½®æ­¤æ–‡ä»¶å¥æŸ„ä¸ºé»˜è®¤è¾“å…¥æ–‡ä»¶ï¼›å½“ä¸ä½¿ç”¨å‚æ•°è°ƒç”¨æ—¶ï¼Œè¿”å›é»˜è®¤è¾“å…¥æ–‡ä»¶å¥æŸ„ã€‚</p><a href=#file-lines-><h4 id=file-lines-><span class=hanchor arialabel=Anchor># </span><strong>file: lines ()</strong></h4></a><p>è¿”å›ä¸€ä¸ªè¿­ä»£å‡½æ•°, æ¯æ¬¡è°ƒç”¨å°†è·å¾—æ–‡ä»¶ä¸­çš„ä¸€è¡Œå†…å®¹, å½“åˆ°æ–‡ä»¶å°¾æ—¶ï¼Œå°†è¿”å› nilï¼Œä½†ä¸å…³é—­æ–‡ä»¶ã€‚</p><a href=#io-lines-filename><h4 id=io-lines-filename><span class=hanchor arialabel=Anchor># </span><strong>io. Lines ([filename])</strong></h4></a><p>æ‰“å¼€æŒ‡å®šçš„æ–‡ä»¶ filename ä¸ºè¯»æ¨¡å¼å¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å‡½æ•°, æ¯æ¬¡è°ƒç”¨å°†è·å¾—æ–‡ä»¶ä¸­çš„ä¸€è¡Œå†…å®¹, å½“åˆ°æ–‡ä»¶å°¾æ—¶ï¼Œå°†è¿”å› nilï¼Œå¹¶è‡ªåŠ¨å…³é—­æ–‡ä»¶ã€‚è‹¥ä¸å¸¦å‚æ•°æ—¶ io.Lines () ç­‰ä»·äº io.Input (): lines () è¯»å–é»˜è®¤è¾“å…¥è®¾å¤‡çš„å†…å®¹ï¼Œç»“æŸæ—¶ä¸å…³é—­æ–‡ä»¶ã€‚</p><a href=#io-output-file><h4 id=io-output-file><span class=hanchor arialabel=Anchor># </span><strong>io. Output ([file])</strong></h4></a><p>ç±»ä¼¼äº io. Inputï¼Œä½†æ“ä½œåœ¨é»˜è®¤è¾“å‡ºæ–‡ä»¶ä¸Šã€‚</p><a href=#file-read-><h4 id=file-read-><span class=hanchor arialabel=Anchor># </span><strong>file: read (&mldr;)</strong></h4></a><p>æŒ‰æŒ‡å®šçš„æ ¼å¼è¯»å–ä¸€ä¸ªæ–‡ä»¶ã€‚æŒ‰æ¯ä¸ªæ ¼å¼å°†è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•°å­—, å¦‚æœä¸èƒ½æ­£ç¡®è¯»å–å°†è¿”å› nilï¼Œè‹¥æ²¡æœ‰æŒ‡å®šæ ¼å¼å°†æŒ‡é»˜è®¤æŒ‰è¡Œæ–¹å¼è¿›è¡Œè¯»å–ã€‚æ ¼å¼ï¼š</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>æ ¼å¼</td><td>å«ä¹‰</td></tr><tr><td>&ldquo;*n&rdquo;</td><td>è¯»å–ä¸€ä¸ªæ•°å­—</td></tr><tr><td>&ldquo;*a&rdquo;</td><td>ä»å½“å‰ä½ç½®è¯»å–æ•´ä¸ªæ–‡ä»¶ã€‚è‹¥å½“å‰ä½ç½®ä¸ºæ–‡ä»¶å°¾ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²</td></tr><tr><td>&ldquo;*l&rdquo;</td><td>è¯»å–ä¸‹ä¸€è¡Œçš„å†…å®¹ã€‚è‹¥ä¸ºæ–‡ä»¶å°¾ï¼Œåˆ™è¿”å› nilã€‚(é»˜è®¤)</td></tr><tr><td>number</td><td>è¯»å–æŒ‡å®šå­—èŠ‚æ•°çš„å­—ç¬¦ã€‚è‹¥ä¸ºæ–‡ä»¶å°¾ï¼Œåˆ™è¿”å› nilã€‚å¦‚æœ number ä¸º 0, åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œè‹¥ä¸ºæ–‡ä»¶å°¾, åˆ™è¿”å› nil</td></tr></tbody></table><a href=#io-read-><h4 id=io-read-><span class=hanchor arialabel=Anchor># </span><strong>io. Read (&mldr;)</strong></h4></a><p>ç›¸å½“äº io.Input ():read</p><a href=#io-type-obj><h4 id=io-type-obj><span class=hanchor arialabel=Anchor># </span><strong>io. Type (obj)</strong></h4></a><p>æ£€æµ‹ obj æ˜¯å¦ä¸€ä¸ªå¯ç”¨çš„æ–‡ä»¶å¥æŸ„ã€‚å¦‚æœ obj æ˜¯ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶å¥æŸ„ï¼Œåˆ™è¿”å› &ldquo;file&rdquo; å¦‚æœ obj æ˜¯ä¸€ä¸ªå·²å…³é—­çš„æ–‡ä»¶å¥æŸ„ï¼Œåˆ™è¿”å› &ldquo;closed file&rdquo; å¦‚æœ obj ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¥æŸ„ï¼Œåˆ™è¿”å› nilã€‚</p><a href=#file-write-><h4 id=file-write-><span class=hanchor arialabel=Anchor># </span><strong>file: write (&mldr;)</strong></h4></a><p>æŠŠæ¯ä¸€ä¸ªå‚æ•°çš„å€¼å†™å…¥æ–‡ä»¶ã€‚å‚æ•°å¿…é¡»ä¸ºå­—ç¬¦ä¸²æˆ–æ•°å­—ï¼Œè‹¥è¦è¾“å‡ºå…¶å®ƒå€¼ï¼Œåˆ™éœ€é€šè¿‡ tostring æˆ– string. Format è¿›è¡Œè½¬æ¢ã€‚</p><a href=#io-write-><h4 id=io-write-><span class=hanchor arialabel=Anchor># </span><strong>io. Write (&mldr;)</strong></h4></a><p>ç›¸å½“äº io.Output (): writeã€‚</p><a href=#file-seek-whence--offset><h4 id=file-seek-whence--offset><span class=hanchor arialabel=Anchor># </span><strong>file: seek ([whence] [, offset])</strong></h4></a><p>è®¾ç½®å’Œè·å–å½“å‰æ–‡ä»¶ä½ç½®ï¼ŒæˆåŠŸåˆ™è¿”å›æœ€ç»ˆçš„æ–‡ä»¶ä½ç½® (æŒ‰å­—èŠ‚ï¼Œç›¸å¯¹äºæ–‡ä»¶å¼€å¤´), å¤±è´¥åˆ™è¿”å› nil åŠ é”™è¯¯ä¿¡æ¯ã€‚ç¼ºçœæ—¶ï¼Œwhence é»˜è®¤ä¸º &ldquo;cur&rdquo;ï¼Œoffset é»˜è®¤ä¸º 0 ã€‚å‚æ•° whenceï¼š</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>whence</td><td>å«ä¹‰</td></tr><tr><td>&ldquo;set&rdquo;</td><td>æ–‡ä»¶å¼€å§‹</td></tr><tr><td>&ldquo;cur&rdquo;</td><td>æ–‡ä»¶å½“å‰ä½ç½® (é»˜è®¤)</td></tr><tr><td>&ldquo;end&rdquo;</td><td>æ–‡ä»¶ç»“æŸ</td></tr></tbody></table><a href=#file-setvbuf-mode--size><h4 id=file-setvbuf-mode--size><span class=hanchor arialabel=Anchor># </span><strong>file: setvbuf (mode [, size])</strong></h4></a><p>è®¾ç½®è¾“å‡ºæ–‡ä»¶çš„ç¼“å†²æ¨¡å¼ã€‚æ¨¡å¼ï¼š</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>æ¨¡å¼</td><td>å«ä¹‰</td></tr><tr><td>&ldquo;no&rdquo;</td><td>æ²¡æœ‰ç¼“å†²ï¼Œå³ç›´æ¥è¾“å‡º</td></tr><tr><td>&ldquo;full&rdquo;</td><td>å…¨ç¼“å†²ï¼Œå³å½“ç¼“å†²æ»¡åæ‰è¿›è¡Œè¾“å‡ºæ“ä½œ (ä¹Ÿå¯è°ƒç”¨ flush é©¬ä¸Šè¾“å‡º)</td></tr><tr><td>&ldquo;line&rdquo;</td><td>ä»¥è¡Œä¸ºå•ä½ï¼Œè¿›è¡Œè¾“å‡º</td></tr></tbody></table><p>æœ€åä¸¤ç§æ¨¡å¼ï¼Œsize å¯ä»¥æŒ‡å®šç¼“å†²çš„å¤§å°ï¼ˆæŒ‰å­—èŠ‚ï¼‰ï¼Œå¿½ç•¥ size å°†è‡ªåŠ¨è°ƒæ•´ä¸ºæœ€ä½³çš„å¤§å°ã€‚</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://googoo-s.github.io/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by googoo-s using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2023</p><ul><li><a href=https://googoo-s.github.io/>Home</a></li><li><a href=https://github.com/googoo-s>GitHub</a></li></ul></footer></div></div></body></html>