<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="10.2 如何从日志分析 PV、UV？ 很多时候，我们观察程序是否如期运行，或者是否有错误，最直接的方式就是看运行日志，当然要想从日志快速查到我们想要的信息，前提是程序打印的日志要精炼、精准。
但日志涵盖的信息远不止于此，比如对于 nginx 的 access.log 日志，我们可以根据日志信息分析用户行为。
什么用户行为呢？比如分析出哪个页面访问次数（PV）最多，访问人数（UV）最多，以及哪天访问量最多，哪个请求访问最多等等。
这次，将用一个大概几万条记录的 nginx 日志文件作为案例，一起来看看如何分析出「用户信息」。
  别急着开始 当我们要分析日志的时候，先用 ls -lh 命令查看日志文件的大小，如果日志文件大小非常大，最好不要在线上环境做。"><meta property="og:title" content><meta property="og:description" content="10.2 如何从日志分析 PV、UV？ 很多时候，我们观察程序是否如期运行，或者是否有错误，最直接的方式就是看运行日志，当然要想从日志快速查到我们想要的信息，前提是程序打印的日志要精炼、精准。
但日志涵盖的信息远不止于此，比如对于 nginx 的 access.log 日志，我们可以根据日志信息分析用户行为。
什么用户行为呢？比如分析出哪个页面访问次数（PV）最多，访问人数（UV）最多，以及哪天访问量最多，哪个请求访问最多等等。
这次，将用一个大概几万条记录的 nginx 日志文件作为案例，一起来看看如何分析出「用户信息」。
  别急着开始 当我们要分析日志的时候，先用 ls -lh 命令查看日志文件的大小，如果日志文件大小非常大，最好不要在线上环境做。"><meta property="og:type" content="website"><meta property="og:image" content="https://googoo-s.github.io/icon.png"><meta property="og:url" content="https://googoo-s.github.io/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/9_linux_cmd/pv_uv/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="10.2 如何从日志分析 PV、UV？ 很多时候，我们观察程序是否如期运行，或者是否有错误，最直接的方式就是看运行日志，当然要想从日志快速查到我们想要的信息，前提是程序打印的日志要精炼、精准。
但日志涵盖的信息远不止于此，比如对于 nginx 的 access.log 日志，我们可以根据日志信息分析用户行为。
什么用户行为呢？比如分析出哪个页面访问次数（PV）最多，访问人数（UV）最多，以及哪天访问量最多，哪个请求访问最多等等。
这次，将用一个大概几万条记录的 nginx 日志文件作为案例，一起来看看如何分析出「用户信息」。
  别急着开始 当我们要分析日志的时候，先用 ls -lh 命令查看日志文件的大小，如果日志文件大小非常大，最好不要在线上环境做。"><meta name=twitter:image content="https://googoo-s.github.io/icon.png"><title>googoo-s 😄😸😎</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://googoo-s.github.io//icon.png><link href=https://googoo-s.github.io/styles.19109a40042e9f0e72e952fda4442a34.min.css rel=stylesheet><link href=https://googoo-s.github.io/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://googoo-s.github.io/js/darkmode.953af745b0f9342644d632fc167f3727.min.js></script>
<script src=https://googoo-s.github.io/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script defer src=https://googoo-s.github.io/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://googoo-s.github.io/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://googoo-s.github.io/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://googoo-s.github.io/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://googoo-s.github.io/",fetchData=Promise.all([fetch("https://googoo-s.github.io/indices/linkIndex.0be9ea5cc5a709de699463fae2ac30a8.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://googoo-s.github.io/indices/contentIndex.0d1fcd0ce55147328e47ced9d4063f41.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://googoo-s.github.io",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://googoo-s.github.io",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/googoo-s.github.io\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=googoo-s.github.io src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://googoo-s.github.io/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://googoo-s.github.io/>googoo-s 😄😸😎</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><p class=meta>Last updated
Unknown</p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#102--如何从日志分析-pvuv>10.2 如何从日志分析 PV、UV？</a><ol><li><a href=#别急着开始>别急着开始</a></li><li><a href=#慎用-cat>慎用 cat</a></li><li><a href=#pv--分析>PV 分析</a></li><li><a href=#pv-分组>PV 分组</a></li><li><a href=#uv-分析>UV 分析</a></li><li><a href=#uv-分组>UV 分组</a></li><li><a href=#终端分析>终端分析</a></li><li><a href=#分析-top3-的请求>分析 TOP3 的请求</a></li><li><a href=#关注作者>关注作者</a></li></ol></li></ol></nav></details></aside><a href=#102--如何从日志分析-pvuv><h1 id=102--如何从日志分析-pvuv><span class=hanchor arialabel=Anchor># </span>10.2 如何从日志分析 PV、UV？</h1></a><p>很多时候，我们观察程序是否如期运行，或者是否有错误，最直接的方式就是看运行<strong>日志</strong>，当然要想从日志快速查到我们想要的信息，前提是程序打印的日志要精炼、精准。</p><p>但日志涵盖的信息远不止于此，比如对于 nginx 的 access.log 日志，我们可以根据日志信息<strong>分析用户行为</strong>。</p><p>什么用户行为呢？比如分析出哪个页面访问次数（<em>PV</em>）最多，访问人数（<em>UV</em>）最多，以及哪天访问量最多，哪个请求访问最多等等。</p><p>这次，将用一个大概几万条记录的 nginx 日志文件作为案例，一起来看看如何分析出「用户信息」。</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/%e6%8f%90%e7%ba%b2%e6%97%a5%e5%bf%97.png width=auto alt></p><hr><a href=#别急着开始><h2 id=别急着开始><span class=hanchor arialabel=Anchor># </span>别急着开始</h2></a><p>当我们要分析日志的时候，先用 <code>ls -lh</code> 命令查看日志文件的大小，如果日志文件大小非常大，最好不要在线上环境做。</p><p>比如我下面这个日志就 6.5M，不算大，在线上环境分析问题不大。</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/ls.png width=auto alt></p><p>如果日志文件数据量太大，你直接一个 <code>cat</code> 命令一执行，是会影响线上环境，加重服务器的负载，严重的话，可能导致服务器无响应。</p><p>当发现日志很大的时候，我们可以使用 <code>scp</code> 命令将文件传输到闲置的服务器再分析，scp 命令使用方式如下图：</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/scp.png width=auto alt></p><hr><a href=#慎用-cat><h2 id=慎用-cat><span class=hanchor arialabel=Anchor># </span>慎用 cat</h2></a><p>大家都知道 <code>cat</code> 命令是用来查看文件内容的，但是日志文件数据量有多少，它就读多少，很显然不适用大文件。</p><p>对于大文件，我们应该养成好习惯，用 <code>less</code> 命令去读文件里的内容，因为 less 并不会加载整个文件，而是按需加载，先是输出一小页的内容，当你要往下看的时候，才会继续加载。</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/less.png width=auto alt></p><p>可以发现，nginx 的 access.log 日志每一行是一次用户访问的记录，从左到右分别包含如下信息：</p><ul><li>客户端的 IP 地址；</li><li>访问时间；</li><li>HTTP 请求的方法、路径、协议版本、协议版本、返回的状态码；</li><li>User Agent，一般是客户端使用的操作系统以及版本、浏览器及版本等；</li></ul><p>不过，有时候我们想看日志最新部分的内容，可以使用 <code>tail</code> 命令，比如当你想查看倒数 5 行的内容，你可以使用这样的命令：</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/tail-n.png width=auto alt></p><p>如果你想实时看日志打印的内容，你可以使用 <code>tail -f</code> 命令，这样你看日志的时候，就会是阻塞状态，有新日志输出的时候，就会实时显示出来。</p><hr><a href=#pv--分析><h2 id=pv--分析><span class=hanchor arialabel=Anchor># </span>PV 分析</h2></a><p>PV 的全称叫 <em>Page View</em>，用户访问一个页面就是一次 PV，比如大多数博客平台，点击一次页面，阅读量就加 1，所以说 PV 的数量并不代表真实的用户数量，只是个点击量。</p><p>对于 nginx 的 <code>acess.log</code> 日志文件来说，分析 PV 还是比较容易的，既然日志里的内容是访问记录，那有多少条日志记录就有多少 PV。</p><p>我们直接使用 <code>wc -l</code> 命令，就可以查看整体的 PV 了，如下图一共有 49903 条 PV。</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/wc.png width=auto alt></p><hr><a href=#pv-分组><h2 id=pv-分组><span class=hanchor arialabel=Anchor># </span>PV 分组</h2></a><p>nginx 的 <code>acess.log</code> 日志文件有访问时间的信息，因此我们可以根据访问时间进行分组，比如按天分组，查看每天的总 PV，这样可以得到更加直观的数据。</p><p>要按时间分组，首先我们先「访问时间」过滤出来，这里可以使用 awk 命令来处理，awk 是一个处理文本的利器。</p><p>awk 命令默认是以「空格」为分隔符，由于访问时间在日志里的第 4 列，因此可以使用 <code>awk '{print $4}' access.log</code> 命令把访问时间的信息过滤出来，结果如下：</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/awk%e6%97%a5%e6%9c%9f.png width=auto alt></p><p>上面的信息还包含了时分秒，如果只想显示年月日的信息，可以使用 <code>awk</code> 的 <code>substr</code> 函数，从第 2 个字符开始，截取 11 个字符。</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/awk%e6%97%a5%e6%9c%9f2.png width=auto alt></p><p>接着，我们可以使用 <code>sort</code> 对日期进行排序，然后使用 <code>uniq -c</code> 进行统计，于是按天分组的 PV 就出来了。</p><p>可以看到，每天的 PV 量大概在 2000-2800：</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/awkpv.png width=auto alt></p><p>注意，<strong>使用 <code>uniq -c</code> 命令前，先要进行 <code>sort</code> 排序</strong>，因为 uniq 去重的原理是比较相邻的行，然后除去第二行和该行的后续副本，因此在使用 uniq 命令之前，请使用 sort 命令使所有重复行相邻。</p><hr><a href=#uv-分析><h2 id=uv-分析><span class=hanchor arialabel=Anchor># </span>UV 分析</h2></a><p>UV 的全称是 <em>Uniq Visitor</em>，它代表访问人数，比如公众号的阅读量就是以 UV 统计的，不管单个用户点击了多少次，最终只算 1 次阅读量。</p><p>access.log 日志里虽然没有用户的身份信息，但是我们可以用「客户端 IP 地址」来<strong>近似统计</strong> UV。</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/uv.png width=auto alt></p><p>该命令的输出结果是 2589，也就说明 UV 的量为 2589。上图中，从左到右的命令意思如下：</p><ul><li><code>awk '{print $1}' access.log</code>，取日志的第 1 列内容，客户端的 IP 地址正是第 1 列；</li><li><code>sort</code>，对信息排序；</li><li><code>uniq</code>，去除重复的记录；</li><li><code>wc -l</code>，查看记录条数；</li></ul><hr><a href=#uv-分组><h2 id=uv-分组><span class=hanchor arialabel=Anchor># </span>UV 分组</h2></a><p>假设我们按天来分组分析每天的 UV 数量，这种情况就稍微比较复杂，需要比较多的命令来实现。</p><p>既然要按天统计 UV，那就得把「日期 + IP地址」过滤出来，并去重，命令如下：</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/uv%e5%88%86%e7%bb%84.png width=auto alt></p><p>具体分析如下：</p><ul><li>第一次 <code>ack</code> 是将第 4 列的日期和第 1 列的客户端 IP 地址过滤出来，并用空格拼接起来；</li><li>然后 <code>sort</code> 对第一次 ack 输出的内容进行排序；</li><li>接着用 <code>uniq</code> 去除重复的记录，也就说日期 +IP 相同的行就只保留一个；</li></ul><p>上面只是把 UV 的数据列了出来，但是并没有统计出次数。</p><p>如果需要对当天的 UV 统计，在上面的命令再拼接 <code>awk '{uv[$1]++;next}END{for (ip in uv) print ip, uv[ip]}'</code> 命令就可以了，结果如下图：</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/awknext.png width=auto alt></p><p>awk 本身是「逐行」进行处理的，当执行完一行后，我们可以用 <code>next</code> 关键字来告诉 awk 跳转到下一行，把下一行作为输入。</p><p>对每一行输入，awk 会根据第 1 列的字符串（也就是日期）进行累加，这样相同日期的 ip 地址，就会累加起来，作为当天的 uv 数量。</p><p>之后的 <code>END</code> 关键字代表一个触发器，就是当前面的输入全部完成后，才会执行 END {} 中的语句，END 的语句是通过 foreach 遍历 uv 中所有的 key，打印出按天分组的 uv 数量。</p><hr><a href=#终端分析><h2 id=终端分析><span class=hanchor arialabel=Anchor># </span>终端分析</h2></a><p>nginx 的 access.log 日志最末尾关于 User Agent 的信息，主要是客户端访问服务器使用的工具，可能是手机、浏览器等。</p><p>因此，我们可以利用这一信息来分析有哪些终端访问了服务器。</p><p>User Agent 的信息在日志里的第 12 列，因此我们先使用 <code>awk</code> 过滤出第 12 列的内容后，进行 <code>sort</code> 排序，再用 <code>uniq -c</code> 去重并统计，最后再使用 <code>sort -rn</code>（<em>r 表示逆向排序， n 表示按数值排序</em>） 对统计的结果排序，结果如下图：</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/terminal.png width=auto alt></p><hr><a href=#分析-top3-的请求><h2 id=分析-top3-的请求><span class=hanchor arialabel=Anchor># </span>分析 TOP3 的请求</h2></a><p>access.log 日志中，第 7 列是客户端请求的路径，先使用 <code>awk</code> 过滤出第 7 列的内容后，进行 <code>sort</code> 排序，再用 <code>uniq -c</code> 去重并统计，然后再使用 <code>sort -rn</code> 对统计的结果排序，最后使用 <code>head -n 3</code> 分析 TOP3 的请求，结果如下图：</p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost4@main/%e7%bd%91%e7%bb%9c/log/TOP3.png width=auto alt></p><hr><a href=#关注作者><h2 id=关注作者><span class=hanchor arialabel=Anchor># </span>关注作者</h2></a><p><em><strong>哈喽，我是小林，就爱图解计算机基础，如果觉得文章对你有帮助，欢迎微信搜索「小林coding」，关注后，回复「网络」再送你图解网络 PDF</strong></em></p><p><img src=https://cdn.jsdelivr.net/gh/xiaolincoder/ImageHost3@main/%e5%85%b6%e4%bb%96/%e5%85%ac%e4%bc%97%e5%8f%b7%e4%bb%8b%e7%bb%8d.png width=auto alt></p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/README/ data-ctx=画图经验分享 data-src=/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/README class=internal-link>README</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://googoo-s.github.io/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by googoo-s using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://googoo-s.github.io/>Home</a></li><li><a href=https://github.com/googoo-s>GitHub</a></li></ul></footer></div></div></body></html>